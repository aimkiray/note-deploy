export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ){return {data:{"blog-pxe-ubuntu":{_path:"\u002Fblog\u002Fpxe-ubuntu",_dir:"blog",_draft:P,_partial:P,_locale:"en",_empty:P,title:"批量重装 Ubuntu 18.04",description:Q,excerpt:{type:at,children:[{type:a,tag:t,props:{id:C},children:[{type:c,value:C}]},{type:a,tag:h,props:{},children:[{type:c,value:Q}]},{type:a,tag:h,props:{},children:[{type:c,value:au},{type:a,tag:q,props:{href:av},children:[{type:c,value:aw}]},{type:c,value:ax}]},{type:a,tag:t,props:{id:D},children:[{type:c,value:D}]},{type:a,tag:h,props:{},children:[{type:c,value:ay},{type:a,tag:r,props:{},children:[{type:c,value:az}]},{type:c,value:aA}]},{type:a,tag:h,props:{},children:[{type:c,value:aB}]},{type:a,tag:g,props:{code:R,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:R}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aC}]},{type:a,tag:g,props:{code:S,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:S}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:I}]},{type:a,tag:g,props:{code:T,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:T}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aD}]},{type:a,tag:h,props:{},children:[{type:c,value:aE}]},{type:a,tag:g,props:{code:U,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:U}]}]}]},{type:a,tag:t,props:{id:V},children:[{type:c,value:W}]},{type:a,tag:z,props:{id:X},children:[{type:c,value:Y}]},{type:a,tag:h,props:{},children:[{type:c,value:aF}]},{type:a,tag:g,props:{code:Z,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:Z}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aG}]},{type:a,tag:z,props:{id:_},children:[{type:c,value:$}]},{type:a,tag:h,props:{},children:[{type:c,value:aH}]},{type:a,tag:g,props:{code:aa,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:aa}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:I}]},{type:a,tag:g,props:{code:ab},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:ab}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aI},{type:a,tag:q,props:{href:aJ,rel:[u]},children:[{type:c,value:J}]},{type:c,value:aK}]},{type:a,tag:z,props:{id:E},children:[{type:c,value:E}]},{type:a,tag:h,props:{},children:[{type:c,value:aL},{type:a,tag:q,props:{href:aM,rel:[u]},children:[{type:c,value:aN}]},{type:c,value:aO}]},{type:a,tag:g,props:{code:ac,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:ac}]}]}]},{type:a,tag:z,props:{id:F},children:[{type:c,value:F}]},{type:a,tag:h,props:{},children:[{type:c,value:aP}]},{type:a,tag:g,props:{code:ad,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:ad}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aQ},{type:a,tag:r,props:{},children:[{type:c,value:aR}]},{type:c,value:aS}]},{type:a,tag:t,props:{id:ae},children:[{type:c,value:af}]},{type:a,tag:h,props:{},children:[{type:c,value:aT},{type:a,tag:q,props:{href:aU,rel:[u]},children:[{type:c,value:aV}]},{type:c,value:aW}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:c,value:aX}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aY},{type:a,tag:r,props:{},children:[{type:c,value:aZ}]},{type:c,value:a_},{type:a,tag:r,props:{},children:[{type:c,value:a$}]},{type:c,value:ba}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:c,value:bb},{type:a,tag:r,props:{},children:[{type:c,value:bc}]},{type:c,value:bd},{type:a,tag:r,props:{},children:[{type:c,value:be}]},{type:c,value:bf}]}]},{type:a,tag:g,props:{code:ag,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:ag}]}]}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:c,value:bg}]}]},{type:a,tag:h,props:{},children:[{type:c,value:bh}]},{type:a,tag:g,props:{code:ah,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:ah}]}]}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:c,value:bi}]}]},{type:a,tag:h,props:{},children:[{type:c,value:bj},{type:a,tag:q,props:{href:bk,rel:[u]},children:[{type:c,value:J}]},{type:c,value:bl}]},{type:a,tag:g,props:{code:ai,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:c,value:ai}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:bm},{type:a,tag:r,props:{},children:[{type:c,value:bn}]},{type:c,value:bo}]},{type:a,tag:t,props:{id:aj},children:[{type:c,value:ak}]},{type:a,tag:h,props:{},children:[{type:c,value:bp}]},{type:a,tag:t,props:{id:G},children:[{type:c,value:G}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:a,tag:q,props:{href:K,rel:[u]},children:[{type:c,value:K}]}]},{type:a,tag:v,props:{},children:[{type:a,tag:q,props:{href:L,rel:[u]},children:[{type:c,value:L}]}]}]}]},date:"2020-10-20T21:05:00.000Z",tags:["linux","pxe"],body:{type:at,children:[{type:a,tag:t,props:{id:C},children:[{type:c,value:C}]},{type:a,tag:h,props:{},children:[{type:c,value:Q}]},{type:a,tag:h,props:{},children:[{type:c,value:au},{type:a,tag:q,props:{href:av},children:[{type:c,value:aw}]},{type:c,value:ax}]},{type:a,tag:t,props:{id:D},children:[{type:c,value:D}]},{type:a,tag:h,props:{},children:[{type:c,value:ay},{type:a,tag:r,props:{},children:[{type:c,value:az}]},{type:c,value:aA}]},{type:a,tag:h,props:{},children:[{type:c,value:aB}]},{type:a,tag:g,props:{code:R,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"sudo apt update"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"sudo apt install dnsmasq"}]}]}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aC}]},{type:a,tag:g,props:{code:S,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"mkdir -p \u002Fsrv\u002Ftftp\u002F"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"vim \u002Fetc\u002Fdnsmasq.conf"}]}]}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:I}]},{type:a,tag:g,props:{code:T,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"interface=eth0"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"bind-interfaces"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"dhcp-range=172.16.199.1,172.16.199.254"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"dhcp-boot=grubnetx64.efi.signed"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"dhcp-host=172.16.199.1"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"enable-tftp"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"tftp-root=\u002Fsrv\u002Ftftp\u002F"}]}]}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aD}]},{type:a,tag:h,props:{},children:[{type:c,value:aE}]},{type:a,tag:g,props:{code:U,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"sudo systemctl start dnsmasq"}]}]}]}]}]},{type:a,tag:t,props:{id:V},children:[{type:c,value:W}]},{type:a,tag:z,props:{id:X},children:[{type:c,value:Y}]},{type:a,tag:h,props:{},children:[{type:c,value:aF}]},{type:a,tag:g,props:{code:Z,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"sudo apt-get install grub-efi-amd64-signed"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"sudo cp \u002Fusr\u002Flib\u002Fgrub\u002Fx86_64-efi-signed\u002Fgrubnetx64.efi.signed \u002Fsrv\u002Ftftp\u002Fgrubnetx64.efi.signed"}]}]}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aG}]},{type:a,tag:z,props:{id:_},children:[{type:c,value:$}]},{type:a,tag:h,props:{},children:[{type:c,value:aH}]},{type:a,tag:g,props:{code:aa,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"mkdir -p \u002Fsrv\u002Ftftp\u002Fgrub"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"vim \u002Fsrv\u002Ftftp\u002Fgrub\u002Fgrub.cfg"}]}]}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:I}]},{type:a,tag:g,props:{code:ab},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{},children:[{type:c,value:"set default=\"0\"\nset timeout=6\nmenuentry \"Install Ubuntu\" {\n  set gfxpayload=keep\n  linux \u002Fubuntu\u002Flinux gfxpayload=800x600x16,800x600 --- auto=true priority=critical interface=auto hostname=fox GRUB_DISABLE_OS_PROBER=true url=tftp:\u002F\u002F172.16.1.1\u002Fpreseed.cfg quiet\n  initrd \u002Fubuntu\u002Finitrd.gz\n}\n..."}]}]}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aI},{type:a,tag:q,props:{href:aJ,rel:[u]},children:[{type:c,value:J}]},{type:c,value:aK}]},{type:a,tag:z,props:{id:E},children:[{type:c,value:E}]},{type:a,tag:h,props:{},children:[{type:c,value:aL},{type:a,tag:q,props:{href:aM,rel:[u]},children:[{type:c,value:aN}]},{type:c,value:aO}]},{type:a,tag:g,props:{code:ac,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"mkdir -p \u002Fsrv\u002Ftftp\u002Fubuntu"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"wget http:\u002F\u002Farchive.ubuntu.com\u002Fubuntu\u002Fdists\u002Fbionic-updates\u002Fmain\u002Finstaller-amd64\u002Fcurrent\u002Fimages\u002Fnetboot\u002Fnetboot.tar.gz"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"tar -xvzf netboot.tar.gz -C \u002Fsrv\u002Ftftp\u002Fubuntu"}]}]}]}]}]},{type:a,tag:z,props:{id:F},children:[{type:c,value:F}]},{type:a,tag:h,props:{},children:[{type:c,value:aP}]},{type:a,tag:g,props:{code:ad,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"sudo apt-get install apt-cacher-ng"}]}]}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aQ},{type:a,tag:r,props:{},children:[{type:c,value:aR}]},{type:c,value:aS}]},{type:a,tag:t,props:{id:ae},children:[{type:c,value:af}]},{type:a,tag:h,props:{},children:[{type:c,value:aT},{type:a,tag:q,props:{href:aU,rel:[u]},children:[{type:c,value:aV}]},{type:c,value:aW}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:c,value:aX}]}]},{type:a,tag:h,props:{},children:[{type:c,value:aY},{type:a,tag:r,props:{},children:[{type:c,value:aZ}]},{type:c,value:a_},{type:a,tag:r,props:{},children:[{type:c,value:a$}]},{type:c,value:ba}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:c,value:bb},{type:a,tag:r,props:{},children:[{type:c,value:bc}]},{type:c,value:bd},{type:a,tag:r,props:{},children:[{type:c,value:be}]},{type:c,value:bf}]}]},{type:a,tag:g,props:{code:ag,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"### Unattended Installation"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i auto-install\u002Fenable boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i debconf\u002Fpriority "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" critical"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"### Localization"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i debian-installer\u002Flocale string en_US.UTF-8"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i localechooser\u002Flanguagelist "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" en"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i localechooser\u002Fshortlist\u002Fen "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" US"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i localechooser\u002Fcontinentlist "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" Asia"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i localechooser\u002Fcountrylist\u002FAsia "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" China"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i console-setup\u002Fask_detect boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:al}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i keyboard-configuration\u002Fxkb-keymap "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" us"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"### Account setup"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i passwd\u002Froot-login boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i passwd\u002Fmake-user boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:al}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i passwd\u002Froot-password password ABC123def"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i passwd\u002Froot-password-again password ABC123def"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i user-setup\u002Fallow-password-weak boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"### Network configuration"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i netcfg\u002Fchoose_interface "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" auto"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i netcfg\u002Fget_hostname string cat"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i hw-detect\u002Fload_firmware boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# If you want the preconfiguration file to work on systems both with and"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# without a dhcp server, uncomment these lines and the static network"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# configuration below."}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i netcfg\u002Fdhcp_failed note"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i netcfg\u002Fdhcp_options "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" Configure network manually"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# Static network configuration."}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i netcfg\u002Fget_ipaddress string 172.16.1.207"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i netcfg\u002Fget_netmask string 255.255.0.0"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i netcfg\u002Fget_gateway string 172.16.255.254"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i netcfg\u002Fget_nameservers string 223.5.5.5"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i netcfg\u002Fconfirm_static boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"### Partition"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# Specify a disk to partition. The device name"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# can be given in either devfs or traditional non-devfs format."}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bq}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:br}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# In addition, you'll need to specify the method to use."}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# The presently available methods are: \"regular\", \"lvm\" and \"crypto\""}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman-auto\u002Fmethod string lvm"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# If one of the disks that are going to be automatically partitioned"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# contains an old LVM configuration, the user will normally receive a"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# warning. This can be preseeded away..."}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bs}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# http:\u002F\u002Fcptyesterday.wordpress.com\u002F2012\u002F06\u002F17\u002Fnotes-on-using-expert_recipe-in-debianubuntu-preseed-files\u002F"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman-auto\u002Fchoose_recipe "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" boot-root"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman-auto-lvm\u002Fnew_vg_name string main"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman-auto-lvm\u002Fguided_size string max"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman-auto\u002Fexpert_recipe string                \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"    boot-root ::                                     \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        1 1 1 free                                   \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            $bios_boot{ }                            \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            method{ biosgrub }                       \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:am}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        256 256 256 fat32                            \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bt}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            $iflabel{ gpt }                          \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            $reusemethod{ }                          \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            method{ efi } format{ }                  \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            mountpoint{ \u002Fboot\u002Fefi }                  \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:am}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        512 512 512 ext4                             \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bt}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            $bootable{ }                             \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bu}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bv}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            mountpoint{ \u002Fboot }                      \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:am}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        4096 4096 -1 ext4                            \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            $lvmok{ }                                \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bu}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bv}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            mountpoint{ \u002F }                          \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"            lv_name{ root }                          \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:N}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# Write the changes to disks and configure LVM"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman\u002Fconfirm boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman-lvm\u002Fconfirm boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman-lvm\u002Fconfirm_nooverwrite boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# http:\u002F\u002Fubuntuforums.org\u002Fshowthread.php?p=9626883"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bw}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# This makes partman automatically partition without confirmation."}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman\u002Fchoose_partition \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:x}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" Finish partitioning and write changes to disk"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i partman\u002Fconfirm_nooverwrite boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i pkgsel\u002Finclude string openssh-server openssh-client vim curl"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"### Mirror settings"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i mirror\u002Fcountry string manual"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i mirror\u002Fhttp\u002Fhostname string mirrors.ustc.edu.cn"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i mirror\u002Fhttp\u002Fdirectory string \u002Fubuntu"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i mirror\u002Fhttp\u002Fproxy string http:\u002F\u002F172.16.1.1:3142\u002F"}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# Custom commands"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i preseed\u002Flate_command string \\"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"    in-target sh -c "}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:"'sed -i \"\u002F#PermitRootLogin\u002Fa PermitRootLogin yes\" \u002Fetc\u002Fssh\u002Fsshd_config'"}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"finish-install finish-install\u002Fkeep-consoles boolean "}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:al}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"d-i finish-install\u002Freboot_in_progress note"}]}]}]}]}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:c,value:bg}]}]},{type:a,tag:h,props:{},children:[{type:c,value:bh}]},{type:a,tag:g,props:{code:ah,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# 删除下面两个配置"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bq}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:br}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# 用这个脚本找出小于 300GB 的硬盘，指定为系统盘"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bx}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:by}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" BOOTDEV "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:ap}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" nvme0n1 nvme1n1 nvme2n1 nvme3n1 nvme4n1"}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:aq}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bz}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" [ "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:"-d"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" \u002Fsys\u002Fblock\u002F$BOOTDEV ]"}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bA}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"      SIZE="}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:"`cat \u002Fsys\u002Fblock\u002F"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ar}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:"\u002Fsize`"}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"      GB="}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:"$(("}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"$SIZE"}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:"\u002F"}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:"2"}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:"**"}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:"21"}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:"))"}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bz}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" [ $GB "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:"-lt"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" 300 ]"}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bA}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        debconf-set partman-auto\u002Fdisk "}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:as}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ar}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        debconf-set grub-installer\u002Fbootdev "}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:as}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ar}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:an}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bB}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bB}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:by}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bC}]}]}]}]}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:c,value:bi}]}]},{type:a,tag:h,props:{},children:[{type:c,value:bj},{type:a,tag:q,props:{href:bk,rel:[u]},children:[{type:c,value:J}]},{type:c,value:bl}]},{type:a,tag:g,props:{code:ai,language:n},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:j},children:[{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# 移除 LVM 分区"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bw}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bs}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:s}]}]},{type:a,tag:b,props:{class:e},children:[]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:i},children:[{type:c,value:"# 上述配置项可能存在 BUG，那就亲自删一遍"}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bx}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:bD}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bE}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:"$(vgs --rows --noheadings "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bF}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:bG}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" vg "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:ap}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bH}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:aq}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        swapoff "}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:as}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bI}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:"\u002Fswap\""}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        vgremove -f "}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bI}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:"done;"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:l},children:[{type:c,value:bD}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bE}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:"$(pvs --rows --noheadings "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bF}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:bG}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:ao}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:" pv "}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:ap}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bH}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:aq}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"        pvremove -f "}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"$pv"}]},{type:a,tag:b,props:{class:m},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:p}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]}]},{type:a,tag:b,props:{class:e},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:f},children:[{type:c,value:bC}]}]}]}]}]},{type:a,tag:h,props:{},children:[{type:c,value:bm},{type:a,tag:r,props:{},children:[{type:c,value:bn}]},{type:c,value:bo}]},{type:a,tag:t,props:{id:aj},children:[{type:c,value:ak}]},{type:a,tag:h,props:{},children:[{type:c,value:bp}]},{type:a,tag:t,props:{id:G},children:[{type:c,value:G}]},{type:a,tag:w,props:{},children:[{type:a,tag:v,props:{},children:[{type:a,tag:q,props:{href:K,rel:[u]},children:[{type:c,value:K}]}]},{type:a,tag:v,props:{},children:[{type:a,tag:q,props:{href:L,rel:[u]},children:[{type:c,value:L}]}]}]},{type:a,tag:"style",children:[{type:c,value:".ct-8a0db2{color:#0A3069}.ct-724c3a{color:#CF222E}.ct-93a0e2{color:#0550AE}.ct-a80ec9{color:#6E7781}.ct-7d49ad{color:#24292F}.dark .ct-7d49ad{color:#C9D1D9}.dark .ct-a80ec9{color:#8B949E}.dark .ct-93a0e2{color:#79C0FF}.dark .ct-724c3a{color:#FF7B72}.dark .ct-8a0db2{color:#A5D6FF}"}]}],toc:{title:j,searchDepth:bJ,depth:bJ,links:[{id:C,depth:H,text:C},{id:D,depth:H,text:D},{id:V,depth:H,text:W,children:[{id:X,depth:O,text:Y},{id:_,depth:O,text:$},{id:E,depth:O,text:E},{id:F,depth:O,text:F}]},{id:ae,depth:H,text:af},{id:aj,depth:H,text:ak},{id:G,depth:H,text:G}]}},_type:"markdown",_id:"content:blog:pxe-ubuntu.md",_source:"content",_file:"blog\u002Fpxe-ubuntu.md",_extension:"md"},"surround-pxe-ubuntu":[{_path:"\u002Fblog\u002Fuse-hpc-like-pc",title:"超算也能用来建站吗？"},{_path:"\u002Fblog\u002Fpxe-centos",title:"批量安装 CentOS 7"}]},prerenderedAt:1679644678722}}("element","span","text","ct-7d49ad","line","ct-724c3a","code","p","ct-a80ec9","","pre","ct-93a0e2","ct-8a0db2","bash"," \\",";","a","code-inline","true","h2","nofollow","li","ul","select","\"","h3","    "," ","概述","安装软件","网络引导","软件包缓存","参考",2,"内容如下。","BUG","https:\u002F\u002Fwiki.ubuntu.com\u002FUEFI\u002FPXE-netboot-install","https:\u002F\u002Fwww.debian.org\u002Freleases\u002Fetch\u002Fia64\u002Fapbs04.html.en","        ",".",3,false,"Ubuntu Server 18.04.5 系统安装使用 debian-installer，兼容 Kickstart 但不够灵活，比如从 5 块 NVMe 硬盘中找到容量最小的盘安装系统这种操作就很难做到。自家的脚本是 Preseed，功能非常强大，能完成一些图形安装界面届不到的操作（缺点是有一点点复杂）。","sudo apt update\nsudo apt install dnsmasq\n","mkdir -p \u002Fsrv\u002Ftftp\u002F\n\nvim \u002Fetc\u002Fdnsmasq.conf\n","interface=eth0\nbind-interfaces\ndhcp-range=172.16.199.1,172.16.199.254\ndhcp-boot=grubnetx64.efi.signed\ndhcp-host=172.16.199.1\n\nenable-tftp\ntftp-root=\u002Fsrv\u002Ftftp\u002F\n","sudo systemctl start dnsmasq\n","配置-pxe-server","配置 PXE Server","boot-loader","Boot loader","sudo apt-get install grub-efi-amd64-signed\n\nsudo cp \u002Fusr\u002Flib\u002Fgrub\u002Fx86_64-efi-signed\u002Fgrubnetx64.efi.signed \u002Fsrv\u002Ftftp\u002Fgrubnetx64.efi.signed\n","grub","GRUB","mkdir -p \u002Fsrv\u002Ftftp\u002Fgrub\nvim \u002Fsrv\u002Ftftp\u002Fgrub\u002Fgrub.cfg\n","set default=\"0\"\nset timeout=6\nmenuentry \"Install Ubuntu\" {\n  set gfxpayload=keep\n  linux \u002Fubuntu\u002Flinux gfxpayload=800x600x16,800x600 --- auto=true priority=critical interface=auto hostname=fox GRUB_DISABLE_OS_PROBER=true url=tftp:\u002F\u002F172.16.1.1\u002Fpreseed.cfg quiet\n  initrd \u002Fubuntu\u002Finitrd.gz\n}\n...\n","mkdir -p \u002Fsrv\u002Ftftp\u002Fubuntu\n\nwget http:\u002F\u002Farchive.ubuntu.com\u002Fubuntu\u002Fdists\u002Fbionic-updates\u002Fmain\u002Finstaller-amd64\u002Fcurrent\u002Fimages\u002Fnetboot\u002Fnetboot.tar.gz\ntar -xvzf netboot.tar.gz -C \u002Fsrv\u002Ftftp\u002Fubuntu\n","sudo apt-get install apt-cacher-ng\n","preseed","Preseed","### Unattended Installation\nd-i auto-install\u002Fenable boolean true\nd-i debconf\u002Fpriority select critical\n\n### Localization\nd-i debian-installer\u002Flocale string en_US.UTF-8\nd-i localechooser\u002Flanguagelist select en\nd-i localechooser\u002Fshortlist\u002Fen select US\nd-i localechooser\u002Fcontinentlist select Asia\nd-i localechooser\u002Fcountrylist\u002FAsia select China\nd-i console-setup\u002Fask_detect boolean false\nd-i keyboard-configuration\u002Fxkb-keymap select us\n\n### Account setup\nd-i passwd\u002Froot-login boolean true\nd-i passwd\u002Fmake-user boolean false\nd-i passwd\u002Froot-password password ABC123def\nd-i passwd\u002Froot-password-again password ABC123def\nd-i user-setup\u002Fallow-password-weak boolean true\n\n### Network configuration\nd-i netcfg\u002Fchoose_interface select auto\nd-i netcfg\u002Fget_hostname string cat\nd-i hw-detect\u002Fload_firmware boolean true\n\n# If you want the preconfiguration file to work on systems both with and\n# without a dhcp server, uncomment these lines and the static network\n# configuration below.\nd-i netcfg\u002Fdhcp_failed note\nd-i netcfg\u002Fdhcp_options select Configure network manually\n\n# Static network configuration.\nd-i netcfg\u002Fget_ipaddress string 172.16.1.207\nd-i netcfg\u002Fget_netmask string 255.255.0.0\nd-i netcfg\u002Fget_gateway string 172.16.255.254\nd-i netcfg\u002Fget_nameservers string 223.5.5.5\nd-i netcfg\u002Fconfirm_static boolean true\n\n### Partition\n# Specify a disk to partition. The device name\n# can be given in either devfs or traditional non-devfs format.\nd-i partman-auto\u002Fdisk string \u002Fdev\u002Fnvme0n1\nd-i grub-installer\u002Fbootdev string \u002Fdev\u002Fnvme0n1\n# In addition, you'll need to specify the method to use.\n# The presently available methods are: \"regular\", \"lvm\" and \"crypto\"\nd-i partman-auto\u002Fmethod string lvm\n\n# If one of the disks that are going to be automatically partitioned\n# contains an old LVM configuration, the user will normally receive a\n# warning. This can be preseeded away...\nd-i partman-auto\u002Fpurge_lvm_from_device boolean true\n\n# http:\u002F\u002Fcptyesterday.wordpress.com\u002F2012\u002F06\u002F17\u002Fnotes-on-using-expert_recipe-in-debianubuntu-preseed-files\u002F\nd-i partman-auto\u002Fchoose_recipe select boot-root\nd-i partman-auto-lvm\u002Fnew_vg_name string main\nd-i partman-auto-lvm\u002Fguided_size string max\n\nd-i partman-auto\u002Fexpert_recipe string                \\\n    boot-root ::                                     \\\n        1 1 1 free                                   \\\n            $bios_boot{ }                            \\\n            method{ biosgrub }                       \\\n        .                                            \\\n        256 256 256 fat32                            \\\n            $primary{ }                              \\\n            $iflabel{ gpt }                          \\\n            $reusemethod{ }                          \\\n            method{ efi } format{ }                  \\\n            mountpoint{ \u002Fboot\u002Fefi }                  \\\n        .                                            \\\n        512 512 512 ext4                             \\\n            $primary{ }                              \\\n            $bootable{ }                             \\\n            method{ format } format{ }               \\\n            use_filesystem{ } filesystem{ ext4 }     \\\n            mountpoint{ \u002Fboot }                      \\\n        .                                            \\\n        4096 4096 -1 ext4                            \\\n            $lvmok{ }                                \\\n            method{ format } format{ }               \\\n            use_filesystem{ } filesystem{ ext4 }     \\\n            mountpoint{ \u002F }                          \\\n            lv_name{ root }                          \\\n        .\n\n# Write the changes to disks and configure LVM\nd-i partman\u002Fconfirm boolean true\nd-i partman-lvm\u002Fconfirm boolean true\nd-i partman-lvm\u002Fconfirm_nooverwrite boolean true\n\n# http:\u002F\u002Fubuntuforums.org\u002Fshowthread.php?p=9626883\nd-i partman-lvm\u002Fdevice_remove_lvm boolean true\n\n# This makes partman automatically partition without confirmation.\nd-i partman\u002Fchoose_partition \\\n      select Finish partitioning and write changes to disk\nd-i partman\u002Fconfirm_nooverwrite boolean true\n\nd-i pkgsel\u002Finclude string openssh-server openssh-client vim curl\n\n### Mirror settings\nd-i mirror\u002Fcountry string manual\nd-i mirror\u002Fhttp\u002Fhostname string mirrors.ustc.edu.cn\nd-i mirror\u002Fhttp\u002Fdirectory string \u002Fubuntu\nd-i mirror\u002Fhttp\u002Fproxy string http:\u002F\u002F172.16.1.1:3142\u002F\n\n# Custom commands\nd-i preseed\u002Flate_command string \\\n    in-target sh -c 'sed -i \"\u002F#PermitRootLogin\u002Fa PermitRootLogin yes\" \u002Fetc\u002Fssh\u002Fsshd_config';\n\nfinish-install finish-install\u002Fkeep-consoles boolean false\nd-i finish-install\u002Freboot_in_progress note\n","# 删除下面两个配置\nd-i partman-auto\u002Fdisk string \u002Fdev\u002Fnvme0n1\nd-i grub-installer\u002Fbootdev string \u002Fdev\u002Fnvme0n1\n\n# 用这个脚本找出小于 300GB 的硬盘，指定为系统盘\nd-i partman\u002Fearly_command string \\\n  for BOOTDEV in nvme0n1 nvme1n1 nvme2n1 nvme3n1 nvme4n1; do \\\n    if [ -d \u002Fsys\u002Fblock\u002F$BOOTDEV ]; then \\\n      SIZE=`cat \u002Fsys\u002Fblock\u002F$BOOTDEV\u002Fsize`; \\\n      GB=$(($SIZE\u002F2**21)); \\\n      if [ $GB -lt 300 ]; then \\\n        debconf-set partman-auto\u002Fdisk \"\u002Fdev\u002F$BOOTDEV\"; \\\n        debconf-set grub-installer\u002Fbootdev \"\u002Fdev\u002F$BOOTDEV\"; \\\n      fi; \\\n    fi; \\\n  done\n","# 移除 LVM 分区\nd-i partman-lvm\u002Fdevice_remove_lvm boolean true\nd-i partman-auto\u002Fpurge_lvm_from_device boolean true\n\n# 上述配置项可能存在 BUG，那就亲自删一遍\nd-i partman\u002Fearly_command string \\\n    set -- $(vgs --rows --noheadings | head -n 1); \\\n    for vg in \"$@\"; do \\\n        swapoff \"\u002Fdev\u002F$vg\u002Fswap\"; \\\n        vgremove -f \"$vg\"; \\\n    done; \\\n    set -- $(pvs --rows --noheadings | head -n 1); \\\n    for pv in \"$@\"; do \\\n        pvremove -f \"$pv\"; \\\n    done\n","pxe-引导","PXE 引导","false","                                            \\","      ","for","in","do","$BOOTDEV","\"\u002Fdev\u002F","root","在 ","\u002Fnote\u002Flinux\u002Fpxe-centos.html","CentOS 篇","中，PXE Server 需要安装 DHCP\u002FTFTP\u002FNginx 等众多软件。这次改用 Dnsmasq 同时提供 DHCP 和 TFTP 服务。也省去 Nginx，直接从软件源安装系统。","下载 Ubuntu 镜像，文中使用的是 ","ubuntu-18.04.5-server-amdyes.iso","。","安装 dnsmasq 服务。","配置 dnsmasq，开启 DHCP 和 TFTP 功能。","其中，interface 是当前使用的网络接口，dhcp-boot 是 grub 引导程序的位置，dhcp-host 是 DHCP Server 网关 IP（可用来可访问本机器），tftp-root 则是 TFTP Server 的根目录。","启动 dnsmasq 服务。","UEFI 启动需要一个 boot loader（文中是 GRUB）。从软件源下载，然后丢进 TFTP 根目录。","grubnetx64.efi.signed 这个名字就是在 \u002Fetc\u002Fdnsmasq.conf 的 dhcp-boot 字段中定义的那个。","配置 GRUB，其实就是 Ubuntu 那个选择系统的启动菜单，添加一个启动项，把系统位置从硬盘改为网络。","由于 Ubuntu 18.04 的 os-prober 操作 LVM 分区时会触发 ","https:\u002F\u002Fbugs.debian.org\u002Fcgi-bin\u002Fbugreport.cgi?bug=853927","，所以加了个环境变量 GRUB_DISABLE_OS_PROBER=true 禁用 os-prober。其他配置项说明参考 CentOS 篇。","从","http:\u002F\u002Fcdimage.ubuntu.com\u002Fnetboot\u002F","这里","下载 Ubuntu 的网络引导镜像，解压到 TFTP 目录下。","Ubuntu 安装程序支持 APT 安装软件包，默认是从官方软件源下载。但如果批量安装，外网怕是会炸，所以要在内网（PXE Server）搭建软件包缓存服务。","安装完成后，在 Preseed 脚本中配置源代理 ","d-i mirror\u002Fhttp\u002Fproxy string http:\u002F\u002F\u003CYOUR_IP\u003E:3142\u002F"," 指向该机器。","Preseed 脚本可配置项非常多，详细可参见","https:\u002F\u002Fwww.debian.org\u002Freleases\u002Fstretch\u002Famd64\u002Fapbs04.html.en","官方文档","。下面简单举几个🌰，可根据自身需求修改。","相同的部分","系统盘使用 LVM 方式分区，除了 ","\u002Fboot,\u002Fboot\u002Fefi"," 分区外，其余空间全给根目录，禁用 SWAP 分区。启用 ROOT 用户，允许 ROOT 用户远程登录，安装 ","openssh-server openssh-client vim curl"," 软件。","系统盘名字固定，比如单块 SATA 系统盘默认设备名是 ","\u002Fdev\u002Fsda","，单块 NVMe SSD 是 ","\u002Fdev\u002Fnvme0n1","，这样系统盘可以写死在配置中。","机器安装多块硬盘，比如有 5 块 NVMe SSD，256GBx1 & 2TBx4，系统装在 256GB 的硬盘上。","基于上面的脚本，在 early_command 中使用 Bash 脚本，通过 debconf-set 来动态指定硬盘位置。","机器本来有系统，需要批量重装，原系统也是 LVM 方式分区。","先移除已存在的 LVM 分区，再尝试安装（虽然有相关配置项，但该版本可能存在 ","https:\u002F\u002Fbugs.debian.org\u002Fcgi-bin\u002Fbugreport.cgi?bug=740271","）。","Preseed 文件放到 TFTP 根目录 ","\u002Fsrv\u002Ftftp\u002F"," 下，也就是 GRUB 菜单配置里 url 指定的那个。","确保内网中没有其他 DHCP 服务，将机器接在 PXE Server 同一个交换机下。重启机器，启动时选择从 PXE 引导，观察是否获得 IP，能否下载启动文件。正常的话稍后就能看到 Ubuntu 安装界面。","d-i partman-auto\u002Fdisk string \u002Fdev\u002Fnvme0n1","d-i grub-installer\u002Fbootdev string \u002Fdev\u002Fnvme0n1","d-i partman-auto\u002Fpurge_lvm_from_device boolean ","            $primary{ }                              \\","            method{ format } format{ }               \\","            use_filesystem{ } filesystem{ ext4 }     \\","d-i partman-lvm\u002Fdevice_remove_lvm boolean ","d-i partman\u002Fearly_command string \\","  ","if","then","fi;","done","set"," -- ","|"," head -n 1)","$@","$vg",5))