export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO){return {data:{"blog-pxe-centos":{_path:"\u002Fblog\u002Fpxe-centos",_dir:"blog",_draft:B,_partial:B,_locale:"en",_empty:B,title:"批量安装 CentOS 7",description:"预启动执行环境（Preboot eXecution Environment，PXE）提供了一种使用网络接口（Network Interface）启动计算机的机制，可用于安装操作系统。",excerpt:{type:aj,children:[{type:a,tag:m,props:{id:t},children:[{type:b,value:t}]},{type:a,tag:g,props:{},children:[{type:b,value:ak}]},{type:a,tag:al,props:{},children:[{type:a,tag:p,props:{},children:[{type:b,value:am}]},{type:a,tag:p,props:{},children:[{type:b,value:an}]},{type:a,tag:p,props:{},children:[{type:b,value:ao}]},{type:a,tag:p,props:{},children:[{type:b,value:ap}]},{type:a,tag:p,props:{},children:[{type:b,value:aq}]},{type:a,tag:p,props:{},children:[{type:b,value:ar}]},{type:a,tag:p,props:{},children:[{type:b,value:as}]}]},{type:a,tag:m,props:{id:u},children:[{type:b,value:u}]},{type:a,tag:g,props:{},children:[{type:b,value:at},{type:a,tag:k,props:{},children:[{type:b,value:au}]},{type:b,value:r}]},{type:a,tag:g,props:{},children:[{type:a,tag:v,props:{},children:[{type:b,value:w}]},{type:b,value:av},{type:a,tag:k,props:{},children:[{type:b,value:aw}]},{type:b,value:ax}]},{type:a,tag:g,props:{},children:[{type:b,value:ay}]},{type:a,tag:f,props:{code:C,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:C}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:az}]},{type:a,tag:g,props:{},children:[{type:a,tag:v,props:{},children:[{type:b,value:w}]},{type:b,value:aA},{type:a,tag:z,props:{href:aB},children:[{type:b,value:aC}]},{type:b,value:r}]},{type:a,tag:m,props:{id:D},children:[{type:b,value:E}]},{type:a,tag:g,props:{},children:[{type:b,value:aD}]},{type:a,tag:f,props:{code:F,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:F}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:aE},{type:a,tag:k,props:{},children:[{type:b,value:aF}]},{type:b,value:aG},{type:a,tag:k,props:{},children:[{type:b,value:aH}]},{type:b,value:r}]},{type:a,tag:f,props:{code:G,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:G}]}]}]},{type:a,tag:g,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:aI}]},{type:b,value:aJ}]},{type:a,tag:g,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:aK}]},{type:b,value:aL}]},{type:a,tag:g,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:aM}]},{type:b,value:aN}]},{type:a,tag:m,props:{id:H},children:[{type:b,value:I}]},{type:a,tag:g,props:{},children:[{type:b,value:aO}]},{type:a,tag:f,props:{code:J,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:J}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:aP}]},{type:a,tag:f,props:{code:K,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:K}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:aQ},{type:a,tag:k,props:{},children:[{type:b,value:aR}]},{type:b,value:aS}]},{type:a,tag:m,props:{id:L},children:[{type:b,value:M}]},{type:a,tag:g,props:{},children:[{type:b,value:aT}]},{type:a,tag:f,props:{code:N,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:N}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:aU},{type:a,tag:k,props:{},children:[{type:b,value:aV}]},{type:b,value:aW},{type:a,tag:k,props:{},children:[{type:b,value:aX}]},{type:b,value:aY}]},{type:a,tag:f,props:{code:O,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:O}]}]}]},{type:a,tag:m,props:{id:P},children:[{type:b,value:Q}]},{type:a,tag:g,props:{},children:[{type:b,value:aZ}]},{type:a,tag:f,props:{code:R,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:R}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:a_}]},{type:a,tag:f,props:{code:S,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:S}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:a$}]},{type:a,tag:f,props:{code:T,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:T}]}]}]},{type:a,tag:g,props:{},children:[{type:a,tag:v,props:{},children:[{type:b,value:w}]},{type:b,value:ba}]},{type:a,tag:f,props:{code:U,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:U}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bb}]},{type:a,tag:f,props:{code:V,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:V}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bc}]},{type:a,tag:f,props:{code:W,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:W}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bd},{type:a,tag:k,props:{},children:[{type:b,value:be}]},{type:b,value:bf}]},{type:a,tag:g,props:{},children:[{type:b,value:bg},{type:a,tag:k,props:{},children:[{type:b,value:bh}]},{type:b,value:bi},{type:a,tag:k,props:{},children:[{type:b,value:bj}]},{type:b,value:r}]},{type:a,tag:f,props:{code:X,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:X}]}]}]},{type:a,tag:m,props:{id:Y},children:[{type:b,value:Z}]},{type:a,tag:g,props:{},children:[{type:b,value:bk}]},{type:a,tag:f,props:{code:_,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:_}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bl}]},{type:a,tag:f,props:{code:$,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:$}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bm}]},{type:a,tag:f,props:{code:aa,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:aa}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bn}]},{type:a,tag:m,props:{id:ab},children:[{type:b,value:ac}]},{type:a,tag:g,props:{},children:[{type:b,value:bo},{type:a,tag:k,props:{},children:[{type:b,value:bp}]},{type:b,value:bq}]},{type:a,tag:g,props:{},children:[{type:b,value:br},{type:a,tag:k,props:{},children:[{type:b,value:bs}]},{type:b,value:bt},{type:a,tag:k,props:{},children:[{type:b,value:bu}]},{type:b,value:bv},{type:a,tag:k,props:{},children:[{type:b,value:bw}]},{type:b,value:bx},{type:a,tag:z,props:{href:by,rel:[bz]},children:[{type:b,value:bA}]},{type:b,value:r}]},{type:a,tag:f,props:{code:ad,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:b,value:ad}]}]}]},{type:a,tag:m,props:{id:x},children:[{type:b,value:x}]},{type:a,tag:g,props:{},children:[{type:b,value:bB},{type:a,tag:bC,props:{},children:[{type:b,value:bD}]},{type:b,value:bE}]}]},date:"2020-10-18T10:20:43.000Z",tags:["linux","pxe"],body:{type:aj,children:[{type:a,tag:m,props:{id:t},children:[{type:b,value:t}]},{type:a,tag:g,props:{},children:[{type:b,value:ak}]},{type:a,tag:al,props:{},children:[{type:a,tag:p,props:{},children:[{type:b,value:am}]},{type:a,tag:p,props:{},children:[{type:b,value:an}]},{type:a,tag:p,props:{},children:[{type:b,value:ao}]},{type:a,tag:p,props:{},children:[{type:b,value:ap}]},{type:a,tag:p,props:{},children:[{type:b,value:aq}]},{type:a,tag:p,props:{},children:[{type:b,value:ar}]},{type:a,tag:p,props:{},children:[{type:b,value:as}]}]},{type:a,tag:m,props:{id:u},children:[{type:b,value:u}]},{type:a,tag:g,props:{},children:[{type:b,value:at},{type:a,tag:k,props:{},children:[{type:b,value:au}]},{type:b,value:r}]},{type:a,tag:g,props:{},children:[{type:a,tag:v,props:{},children:[{type:b,value:w}]},{type:b,value:av},{type:a,tag:k,props:{},children:[{type:b,value:aw}]},{type:b,value:ax}]},{type:a,tag:g,props:{},children:[{type:b,value:ay}]},{type:a,tag:f,props:{code:C,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"systemctl disable firewalld.service --now"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"sed -i "}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"'s\u002F^SELINUX=.*\u002FSELINUX=disabled\u002F'"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" \u002Fetc\u002Fselinux\u002Fconfig"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"setenforce 0"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:az}]},{type:a,tag:g,props:{},children:[{type:a,tag:v,props:{},children:[{type:b,value:w}]},{type:b,value:aA},{type:a,tag:z,props:{href:aB},children:[{type:b,value:aC}]},{type:b,value:r}]},{type:a,tag:m,props:{id:D},children:[{type:b,value:E}]},{type:a,tag:g,props:{},children:[{type:b,value:aD}]},{type:a,tag:f,props:{code:F,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"yum install dhcp -y"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:aE},{type:a,tag:k,props:{},children:[{type:b,value:aF}]},{type:b,value:aG},{type:a,tag:k,props:{},children:[{type:b,value:aH}]},{type:b,value:r}]},{type:a,tag:f,props:{code:G,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"option pxe-system-type code 93 = unsigned integer 16"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"subnet 172.16.22.0 netmask 255.255.255.0 {"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  range 172.16.22.2 172.16.22.254"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  option routers 172.16.22.1"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  option subnet-mask 255.255.255.0"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  next-server 172.16.22.1"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  "}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bF}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" option pxe-system-type = 00:07 {      "}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:bG}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:bH}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bI}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:bJ}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bF}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" option pxe-system-type = 00:09 {"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:bG}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:bH}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bI}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:bK}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\"pxelinux.0\""}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  }"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:aI}]},{type:b,value:aJ}]},{type:a,tag:g,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:aK}]},{type:b,value:aL}]},{type:a,tag:g,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:aM}]},{type:b,value:aN}]},{type:a,tag:m,props:{id:H},children:[{type:b,value:I}]},{type:a,tag:g,props:{},children:[{type:b,value:aO}]},{type:a,tag:f,props:{code:J,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"yum install xinetd tftp-server –y"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:aP}]},{type:a,tag:f,props:{code:K,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"systemctl start xinetd"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"systemctl "}]},{type:a,tag:c,props:{class:y},children:[{type:b,value:"enable"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" xinetd"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:aQ},{type:a,tag:k,props:{},children:[{type:b,value:aR}]},{type:b,value:aS}]},{type:a,tag:m,props:{id:L},children:[{type:b,value:M}]},{type:a,tag:g,props:{},children:[{type:b,value:aT}]},{type:a,tag:f,props:{code:N,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"yum install epel-release"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"yum install nginx"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:aU},{type:a,tag:k,props:{},children:[{type:b,value:aV}]},{type:b,value:aW},{type:a,tag:k,props:{},children:[{type:b,value:aX}]},{type:b,value:aY}]},{type:a,tag:f,props:{code:O,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"server {"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    listen       80 default_server"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    listen       [::]:80 default_server"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    server_name  _"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    root         \u002Fusr\u002Fshare\u002Fnginx\u002Fhtml"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    "}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Load configuration files for the default server block."}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    include \u002Fetc\u002Fnginx\u002Fdefault.d\u002F"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:".conf"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    location \u002F {"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"        autoindex on"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ag}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    error_page 404 \u002F404.html"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"        location = \u002F40x.html {"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ag}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    error_page 500 502 503 504 \u002F50x.html"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:o}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"        location = \u002F50x.html {"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ag}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:m,props:{id:P},children:[{type:b,value:Q}]},{type:a,tag:g,props:{},children:[{type:b,value:aZ}]},{type:a,tag:f,props:{code:R,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"yum install grub2-efi-x64 shim-x64"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:a_}]},{type:a,tag:f,props:{code:S,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"mkdir \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:a$}]},{type:a,tag:f,props:{code:T,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"cp -p \u002Fboot\u002Fefi\u002FEFI\u002Fcentos\u002F"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:".efi \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\u002F"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"chmod 755 \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\u002F"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:".efi"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:a,tag:v,props:{},children:[{type:b,value:w}]},{type:b,value:ba}]},{type:a,tag:f,props:{code:U,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"mkdir \u002Fcentos"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"mkdir $HOME\u002Fuefi_tmp"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"mount -t iso9660 CentOS-7-x86_64-Minimal-2003.iso \u002Fcentos -o loop,ro"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"cp -pr \u002Fcentos\u002FPackages\u002Fshim-version-architecture.rpm $HOME\u002Fuefi_tmp"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"cp -pr \u002Fcentos\u002FPackages\u002Fgrub2-efi-version-architecture.rpm $HOME\u002Fuefi_tmp"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bb}]},{type:a,tag:f,props:{code:V,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:y},children:[{type:b,value:"cd"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" $HOME\u002Fuefi_tmp"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"rpm2cpio shim-version-architecture.rpm "}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bL}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:bM}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"rpm2cpio grub2-efi-version-architecture.rpm "}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:bL}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:bM}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bc}]},{type:a,tag:f,props:{code:W,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"cp $HOME\u002Fuefi_tmp\u002Fboot\u002Fefi\u002FEFI\u002Fcentos\u002Fshim.efi \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\u002F"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"cp $HOME\u002Fuefi_tmp\u002Fboot\u002Fefi\u002FEFI\u002Fcentos\u002Fgrubx64.efi \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\u002F"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bd},{type:a,tag:k,props:{},children:[{type:b,value:be}]},{type:b,value:bf}]},{type:a,tag:g,props:{},children:[{type:b,value:bg},{type:a,tag:k,props:{},children:[{type:b,value:bh}]},{type:b,value:bi},{type:a,tag:k,props:{},children:[{type:b,value:bj}]},{type:b,value:r}]},{type:a,tag:f,props:{code:X,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:y},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" default="}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\"0\""}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:l},children:[{type:b,value:"function"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:bJ}]},{type:a,tag:c,props:{class:"ct-22ba53"},children:[{type:b,value:bN}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:bK}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  insmod efi_gop"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  insmod efi_uga"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  insmod video_bochs"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  insmod video_cirrus"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  insmod all_video"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:A}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:bN}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:y},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" gfxpayload=keep"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"insmod gzio"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"insmod part_gpt"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"insmod ext2"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:y},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" timeout=6"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"menuentry "}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"'Install CentOS Linux 7.8'"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" --class fedora --class gnu-linux --class gnu --class os {"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  linuxefi CentOS-7.8\u002Fvmlinuz ip=dhcp inst.ks=http:\u002F\u002F172.16.22.1:80\u002Fsupermicro.cfg"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  initrdefi CentOS-7.8\u002Finitrd.img"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:A}]}]}]}]}]},{type:a,tag:m,props:{id:Y},children:[{type:b,value:Z}]},{type:a,tag:g,props:{},children:[{type:b,value:bk}]},{type:a,tag:f,props:{code:_,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"yum -y install syslinux"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"cp \u002Fusr\u002Fshare\u002Fsyslinux\u002Fpxelinux.0 \u002Fvar\u002Flib\u002Ftftpboot\u002F"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bl}]},{type:a,tag:f,props:{code:$,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"mkdir \u002Fvar\u002Flib\u002Ftftpboot\u002Fpxelinux.cfg"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"vim \u002Fvar\u002Flib\u002Ftftpboot\u002Fpxelinux.cfg\u002Fdefault"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bm}]},{type:a,tag:f,props:{code:aa,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"default vesamenu.c32"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"prompt 1"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"timeout 6"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"display boot.msg"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"label linux"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  menu label ^Install system"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  menu default"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  kernel CentOS-7.8\u002Fvmlinuz"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"  append initrd=CentOS-7.8\u002Finitrd.img ip=dhcp ks=http:\u002F\u002F172.16.22.1\u002Fsupermicro.cfg"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:b,value:bn}]},{type:a,tag:m,props:{id:ab},children:[{type:b,value:ac}]},{type:a,tag:g,props:{},children:[{type:b,value:bo},{type:a,tag:k,props:{},children:[{type:b,value:bp}]},{type:b,value:bq}]},{type:a,tag:g,props:{},children:[{type:b,value:br},{type:a,tag:k,props:{},children:[{type:b,value:bs}]},{type:b,value:bt},{type:a,tag:k,props:{},children:[{type:b,value:bu}]},{type:b,value:bv},{type:a,tag:k,props:{},children:[{type:b,value:bw}]},{type:b,value:bx},{type:a,tag:z,props:{href:by,rel:[bz]},children:[{type:b,value:bA}]},{type:b,value:r}]},{type:a,tag:f,props:{code:ad,language:i},children:[{type:a,tag:j,props:{},children:[{type:a,tag:f,props:{__ignoreMap:h},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"#version=DEVEL"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"install"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# System authorization information"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"auth --enableshadow --passalgo=sha512"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Use text mode install"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:b}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Run the Setup Agent on first boot"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"firstboot --enable"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"ignoredisk --only-use=nvme1n1"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Keyboard layouts"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"keyboard --vckeymap=us --xlayouts="}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"''"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# System language"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"lang en_US.UTF-8"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Use network installation"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"url --url="}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\"http:\u002F\u002F172.16.22.1\u002FCentOS-7.8\""}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Reboot after installation"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"reboot"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Network information"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"network --bootproto=dhcp --device=eno1 --onboot=off --ipv6=auto --no-activate"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"network --bootproto=dhcp --device=eno2 --onboot=off --ipv6=auto"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"network --bootproto=static --device=enp33s0 --onboot=yes --ip 172.16.1.10 --netmask 255.255.0.0 --gateway 172.16.255.254 --ipv6=auto --nameserver 114.114.114.114"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Firewall configuration"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"firewall --disable"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"#Root password"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"rootpw --plaintext "}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\"123@def\""}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# SELinux configuration"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"selinux --disabled"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# System services"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"services --enabled="}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\"chronyd\""}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Do not configure the X Window System"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"skipx"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# System timezone"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"timezone Asia\u002FShanghai --isUtc"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# System bootloader configuration"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"bootloader --append="}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\" crashkernel=auto\""}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" --location=mbr --boot-drive=nvme1n1"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"autopart"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:n},children:[{type:b,value:"# Partition clearing information"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"clearpart --all --initlabel --drives=nvme1n1"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"%packages"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"@core"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"chrony"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"kexec-tools"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ai}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"%addon com_redhat_kdump --enable --reserve-mb="}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"'auto'"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ai}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"%anaconda"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ai}]}]}]}]}]},{type:a,tag:m,props:{id:x},children:[{type:b,value:x}]},{type:a,tag:g,props:{},children:[{type:b,value:bB},{type:a,tag:bC,props:{},children:[{type:b,value:bD}]},{type:b,value:bE}]},{type:a,tag:"style",children:[{type:b,value:".ct-22ba53{color:#8250DF}.ct-8a07f4{color:#6E7781}.ct-48cb96{color:#0550AE}.ct-e15f86{color:#CF222E}.ct-a9412a{color:#0A3069}.ct-5483b6{color:#24292F}.dark .ct-5483b6{color:#C9D1D9}.dark .ct-a9412a{color:#A5D6FF}.dark .ct-e15f86{color:#FF7B72}.dark .ct-48cb96{color:#79C0FF}.dark .ct-8a07f4{color:#8B949E}.dark .ct-22ba53{color:#D2A8FF}"}]}],toc:{title:h,searchDepth:bO,depth:bO,links:[{id:t,depth:s,text:t},{id:u,depth:s,text:u},{id:D,depth:s,text:E},{id:H,depth:s,text:I},{id:L,depth:s,text:M},{id:P,depth:s,text:Q},{id:Y,depth:s,text:Z},{id:ab,depth:s,text:ac},{id:x,depth:s,text:x}]}},_type:"markdown",_id:"content:blog:pxe-centos.md",_source:"content",_file:"blog\u002Fpxe-centos.md",_extension:"md"},"surround-pxe-centos":[{_path:"\u002Fblog\u002Fpxe-ubuntu",title:"批量重装 Ubuntu 18.04"},{_path:"\u002Fblog\u002Fartificial-baka-one",title:"阿库娅很不错，要整一个吗？"}]},prerenderedAt:1679644678837}}("element","text","span","line","ct-5483b6","code","p","","bash","pre","code-inline","ct-e15f86","h2","ct-8a07f4",";","li","ct-a9412a","。",2,"概述","准备工作","strong","Optional:","开始安装","ct-48cb96","a","}",false,"systemctl disable firewalld.service --now\n\nsed -i 's\u002F^SELINUX=.*\u002FSELINUX=disabled\u002F' \u002Fetc\u002Fselinux\u002Fconfig\nsetenforce 0\n","dhcp-server","DHCP Server","yum install dhcp -y\n","option pxe-system-type code 93 = unsigned integer 16;\n\nsubnet 172.16.22.0 netmask 255.255.255.0 {\n  range 172.16.22.2 172.16.22.254;\n  option routers 172.16.22.1;\n  option subnet-mask 255.255.255.0;\n\n  next-server 172.16.22.1;\n\n  if option pxe-system-type = 00:07 {      \n    filename \"uefi\u002Fshim.efi\";\n  } else if option pxe-system-type = 00:09 {\n    filename \"uefi\u002Fshim.efi\";\n  } else {\n    filename \"pxelinux.0\";\n  }\n}\n","tftp-server","TFTP Server","yum install xinetd tftp-server –y\n","systemctl start xinetd\nsystemctl enable xinetd\n","http-server","HTTP Server","yum install epel-release\nyum install nginx\n","server {\n    listen       80 default_server;\n    listen       [::]:80 default_server;\n    server_name  _;\n    root         \u002Fusr\u002Fshare\u002Fnginx\u002Fhtml;\n\n    # Load configuration files for the default server block.\n    include \u002Fetc\u002Fnginx\u002Fdefault.d\u002F*.conf;\n\n    location \u002F {\n        autoindex on;\n    }\n\n    error_page 404 \u002F404.html;\n        location = \u002F40x.html {\n    }\n\n    error_page 500 502 503 504 \u002F50x.html;\n        location = \u002F50x.html {\n    }\n}\n","uefi-引导","UEFI 引导","yum install grub2-efi-x64 shim-x64\n","mkdir \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\n","cp -p \u002Fboot\u002Fefi\u002FEFI\u002Fcentos\u002F*.efi \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\u002F\nchmod 755 \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\u002F*.efi\n","mkdir \u002Fcentos\nmkdir $HOME\u002Fuefi_tmp\nmount -t iso9660 CentOS-7-x86_64-Minimal-2003.iso \u002Fcentos -o loop,ro\ncp -pr \u002Fcentos\u002FPackages\u002Fshim-version-architecture.rpm $HOME\u002Fuefi_tmp\ncp -pr \u002Fcentos\u002FPackages\u002Fgrub2-efi-version-architecture.rpm $HOME\u002Fuefi_tmp\n","cd $HOME\u002Fuefi_tmp\nrpm2cpio shim-version-architecture.rpm | cpio -dimv\nrpm2cpio grub2-efi-version-architecture.rpm | cpio -dimv\n","cp $HOME\u002Fuefi_tmp\u002Fboot\u002Fefi\u002FEFI\u002Fcentos\u002Fshim.efi \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\u002F\ncp $HOME\u002Fuefi_tmp\u002Fboot\u002Fefi\u002FEFI\u002Fcentos\u002Fgrubx64.efi \u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\u002F\n","set default=\"0\"\n\nfunction load_video {\n  insmod efi_gop\n  insmod efi_uga\n  insmod video_bochs\n  insmod video_cirrus\n  insmod all_video\n}\n\nload_video\nset gfxpayload=keep\ninsmod gzio\ninsmod part_gpt\ninsmod ext2\nset timeout=6\n\nmenuentry 'Install CentOS Linux 7.8' --class fedora --class gnu-linux --class gnu --class os {\n  linuxefi CentOS-7.8\u002Fvmlinuz ip=dhcp inst.ks=http:\u002F\u002F172.16.22.1:80\u002Fsupermicro.cfg\n  initrdefi CentOS-7.8\u002Finitrd.img\n}\n","legacy-引导","Legacy 引导","yum -y install syslinux\ncp \u002Fusr\u002Fshare\u002Fsyslinux\u002Fpxelinux.0 \u002Fvar\u002Flib\u002Ftftpboot\u002F\n","mkdir \u002Fvar\u002Flib\u002Ftftpboot\u002Fpxelinux.cfg\nvim \u002Fvar\u002Flib\u002Ftftpboot\u002Fpxelinux.cfg\u002Fdefault\n","default vesamenu.c32\nprompt 1\ntimeout 6\n\ndisplay boot.msg\n\nlabel linux\n  menu label ^Install system\n  menu default\n  kernel CentOS-7.8\u002Fvmlinuz\n  append initrd=CentOS-7.8\u002Finitrd.img ip=dhcp ks=http:\u002F\u002F172.16.22.1\u002Fsupermicro.cfg\n","kickstart","Kickstart","#version=DEVEL\ninstall\n# System authorization information\nauth --enableshadow --passalgo=sha512\n# Use text mode install\ntext\n# Run the Setup Agent on first boot\nfirstboot --enable\nignoredisk --only-use=nvme1n1\n# Keyboard layouts\nkeyboard --vckeymap=us --xlayouts=''\n# System language\nlang en_US.UTF-8\n# Use network installation\nurl --url=\"http:\u002F\u002F172.16.22.1\u002FCentOS-7.8\"\n# Reboot after installation\nreboot\n\n# Network information\nnetwork --bootproto=dhcp --device=eno1 --onboot=off --ipv6=auto --no-activate\nnetwork --bootproto=dhcp --device=eno2 --onboot=off --ipv6=auto\nnetwork --bootproto=static --device=enp33s0 --onboot=yes --ip 172.16.1.10 --netmask 255.255.0.0 --gateway 172.16.255.254 --ipv6=auto --nameserver 114.114.114.114\n# Firewall configuration\nfirewall --disable\n\n#Root password\nrootpw --plaintext \"123@def\"\n# SELinux configuration\nselinux --disabled\n# System services\nservices --enabled=\"chronyd\"\n# Do not configure the X Window System\nskipx\n# System timezone\ntimezone Asia\u002FShanghai --isUtc\n# System bootloader configuration\nbootloader --append=\" crashkernel=auto\" --location=mbr --boot-drive=nvme1n1\nautopart\n# Partition clearing information\nclearpart --all --initlabel --drives=nvme1n1\n\n%packages\n@core\nchrony\nkexec-tools\n\n%end\n\n%addon com_redhat_kdump --enable --reserve-mb='auto'\n\n%end\n\n%anaconda\npwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty\npwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok\npwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty\n%end\n","    filename ","*","    }","set","%end","root","预启动执行环境（Preboot eXecution Environment，PXE）提供了一种使用网络接口（Network Interface）启动计算机的机制，可用于安装操作系统。流程一般如下。","ul","客户端从 Network 启动，发送 DHCP 请求。","DHCP 服务器发送一个带有 next-server 信息的响应。","客户端发送 DHCPREQUEST\u002FDHCPINFORM 请求。","DHCP 服务器发送 TFTP 服务器地址和所需的文件名。","客户端从 TFTP 服务器下载这个文件，一般是很小的引导文件。","pxelinux\u002Fgrub 读取配置文件，下载相关文件。","进入安装程序，下载 Anaconda 的 Kickstart 自动应答脚本，开始安装。","下载 CentOS 镜像，文中使用的是 ","CentOS-7-x86_64-Minimal-2003.iso"," 手动装一台机器（安装程序选择非图形界面，Troubleshooting -\u003E Install CentOS Linux 7 in basic graphics mode）。进入系统，在","$HOME","目录下有个 Kickstart 文件，里面是安装程序自动生成的脚本，保存起来作为模板。","选一台机器用作 PXE Server（比如上面装好的），开放 tftp 和 http 端口（或者禁用防火墙），关闭 SELinux（会阻止从网络访问本地文件）。","如果路由器是 DHCP 模式，最好先从交换机上拔掉，或者改为静态 IP 模式（如果机器都接在路由器上），因为内网中存在多个 DHCP Server 会相互干扰。"," 也可以用 Dnsmasq 替代 dhcp 和 tftp-server，具体参见 ","\u002Fnote\u002Flinux\u002Fpxe-ubuntu.html","Ubuntu 篇","支持 PXE 启动的网卡会内置 DHCP Client，用于从内网 PXE Server 获取 IP，顺便查询 TFTP Server 的 IP。那我们第一步就是在 PXE Server 上安装 DHCP Server 为 PXE 设备分配 IP。","考虑到服务器配置各不相同，安装方法肯定也有所不同，但装系统也只需在意系统盘的区别。比如 NVMe SSD 或 SATA SSD，前者仅支持 UEFI 引导，后者可用 UEFI 或 Legacy，但机器只支持 Legacy PXE 启动。想一次性装完所有机器，可以在 DHCP Server 的配置中加入判断，区分客户端是普通 DHCP 还是 UEFI PXE 或是 Legacy PXE。","dhcpd","的配置位于","\u002Fetc\u002Fdhcp\u002Fdhcpd.conf","next-server"," 用于提示 TFTP Server 的 IP 地址，可以是本机。","shim"," 是 Linux 的引导程序，支持 EFI 引导，如果检测到 UEFI PXE 就用这个。","pxelinux.0"," 也是 Linux 的引导程序（SYSLINUX），用于 Legacy PXE。","PXE 支持 TFTP 协议，我们把引导程序（shim & pxelinux.0）放在 TFTP 服务器对应目录。","xinetd 是 TFTP 的守护进程，启动 xinetd 就能拉起 TFTP。","TFTP 服务器默认根目录在","\u002Fvar\u002Flib\u002Ftftpboot","，后面会把引导文件放这里。","TFTP 基于小块（512KB）的 UDP 协议传输数据，速度很慢，只适合传输小文件。软件包等大文件可以换用 NGINX 之类的 HTTP Server 下载。","默认配置文件在","\u002Fetc\u002Fnginx\u002Fnginx.conf","，在 location 中添加","autoindex on","配置打开文件索引，大文件就放在网络根目录下。","用 yum 下载 CentOS 7 的 UEFI 引导软件包。","在 TFTP 服务器根目录下新建目录，用于存放 uefi 启动文件。","复制相关文件，修改文件权限。"," 或者直接从系统镜像复制过来也行，方法如下。","解压 rpm 软件包。","复制 EFI 引导程序到 TFTP 目录。","在下面的栗子中，Vmlinuz 是 Linux 内核可执行文件，它将 OS 加载到内存中，这样就可以启动机器了。","inst.ks","是 Kickstart 自动应答脚本。Initrd 镜像用来初始化 RAM 磁盘，然后将其挂载为根文件系统，并从中运行 CentOS 安装程序。","在","grubx64.efi","同级目录新建 GRUB 配置文件","\u002Fvar\u002Flib\u002Ftftpboot\u002Fuefi\u002Fgrub.cfg","安装 syslinux，把引导程序复制到 TFTP 根目录。","创建 pxelinux 的配置文件。","内容如下。","这里依然能看到 vmlinuz & initrd & ks 熟悉的身影，如需修改可参考上一步说明。","建议先用准备好的镜像在非图形界面下手动安装一台，复制 $HOME 目录下自动生成的","anaconda-ks.cfg","脚本作为参考。","下面的脚本中，系统将从网络安装，","url","是内网的安装源，","rootpw","是 root 用户密码。系统盘是","nvme1n1","，使用 LVM，默认分区表。详细的语法说明参见","https:\u002F\u002Faccess.redhat.com\u002Fdocumentation\u002Fzh-cn\u002Fred_hat_enterprise_linux\u002F7\u002Fhtml\u002Finstallation_guide\u002Fsect-kickstart-syntax","nofollow","官方文档","通过 BIOS 或 IPMI，将机器首选启动项改为 PXE，重启机器就能看到 CentOS 的安装程序，无需操作，等待安装","del","失败","完成（ε = = (づ′▽`)づ","if","\"uefi\u002Fshim.efi\"","  } ","else"," "," {","|"," cpio -dimv","load_video",5))