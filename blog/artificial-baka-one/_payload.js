export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC){return {data:{"blog-artificial-baka-one":{_path:"\u002Fblog\u002Fartificial-baka-one",_dir:"blog",_draft:K,_partial:K,_locale:"en",_empty:K,title:"阿库娅很不错，要整一个吗？",description:L,excerpt:{type:Y,children:[{type:a,tag:c,props:{},children:[{type:b,value:L}]},{type:a,tag:c,props:{},children:[{type:b,value:Z}]},{type:a,tag:c,props:{},children:[{type:a,tag:l,props:{alt:_,src:$},children:[]}]},{type:a,tag:r,props:{id:s},children:[{type:b,value:s}]},{type:a,tag:f,props:{id:t},children:[{type:b,value:t}]},{type:a,tag:c,props:{},children:[{type:b,value:aa}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ab}]},{type:a,tag:d,props:{},children:[{type:b,value:ac}]},{type:a,tag:d,props:{},children:[{type:b,value:ad}]},{type:a,tag:d,props:{},children:[{type:b,value:ae}]},{type:a,tag:d,props:{},children:[{type:b,value:af}]},{type:a,tag:d,props:{},children:[{type:b,value:ag}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ah}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ai},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aj}]},{type:a,tag:d,props:{},children:[{type:b,value:ak}]},{type:a,tag:d,props:{},children:[{type:b,value:al}]},{type:a,tag:d,props:{},children:[{type:b,value:am}]},{type:a,tag:d,props:{},children:[{type:b,value:an}]}]}]},{type:a,tag:d,props:{},children:[{type:b,value:ao},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ap}]},{type:a,tag:d,props:{},children:[{type:b,value:aq}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ar}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:as}]},{type:a,tag:d,props:{},children:[{type:b,value:at}]},{type:a,tag:d,props:{},children:[{type:b,value:au}]}]},{type:a,tag:c,props:{},children:[{type:b,value:av}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aw}]},{type:a,tag:d,props:{},children:[{type:b,value:ax}]}]},{type:a,tag:f,props:{id:u},children:[{type:b,value:u}]},{type:a,tag:c,props:{},children:[{type:b,value:ay}]},{type:a,tag:c,props:{},children:[{type:b,value:az}]},{type:a,tag:l,props:{src:aA,style:F},children:[]},{type:a,tag:f,props:{id:q},children:[{type:b,value:q}]},{type:a,tag:c,props:{},children:[{type:b,value:aB}]},{type:a,tag:l,props:{src:aC,style:aD},children:[]},{type:a,tag:c,props:{},children:[{type:b,value:aE},{type:a,tag:m,props:{},children:[{type:b,value:G}]},{type:b,value:aF},{type:a,tag:m,props:{},children:[{type:b,value:aG}]},{type:b,value:aH},{type:a,tag:m,props:{},children:[{type:b,value:G}]},{type:b,value:aI},{type:a,tag:m,props:{},children:[{type:b,value:aJ}]},{type:b,value:aK},{type:a,tag:m,props:{},children:[{type:b,value:aL}]},{type:b,value:aM}]},{type:a,tag:f,props:{id:v},children:[{type:b,value:v}]},{type:a,tag:c,props:{},children:[{type:b,value:aN}]},{type:a,tag:c,props:{},children:[{type:b,value:aO}]},{type:a,tag:c,props:{},children:[{type:b,value:aP}]},{type:a,tag:l,props:{src:aQ,style:aR},children:[]},{type:a,tag:c,props:{},children:[{type:b,value:aS}]},{type:a,tag:r,props:{id:w},children:[{type:b,value:w}]},{type:a,tag:c,props:{},children:[{type:b,value:aT}]},{type:a,tag:f,props:{id:x},children:[{type:b,value:x}]},{type:a,tag:c,props:{},children:[{type:b,value:aU}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aV}]},{type:a,tag:d,props:{},children:[{type:b,value:aW}]},{type:a,tag:d,props:{},children:[{type:b,value:aX}]},{type:a,tag:d,props:{},children:[{type:b,value:aY}]},{type:a,tag:d,props:{},children:[{type:b,value:aZ}]}]},{type:a,tag:f,props:{id:H},children:[{type:b,value:M}]},{type:a,tag:c,props:{},children:[{type:b,value:a_}]},{type:a,tag:c,props:{},children:[{type:b,value:a$}]},{type:a,tag:f,props:{id:y},children:[{type:b,value:y}]},{type:a,tag:c,props:{},children:[{type:b,value:ba}]},{type:a,tag:c,props:{},children:[{type:b,value:bb}]},{type:a,tag:f,props:{id:N},children:[{type:b,value:O}]},{type:a,tag:c,props:{},children:[{type:b,value:bc}]},{type:a,tag:c,props:{},children:[{type:b,value:bd}]},{type:a,tag:f,props:{id:z},children:[{type:b,value:z}]},{type:a,tag:c,props:{},children:[{type:b,value:be}]},{type:a,tag:l,props:{src:bf,style:bg},children:[]},{type:a,tag:f,props:{id:I},children:[{type:b,value:P}]},{type:a,tag:c,props:{},children:[{type:b,value:bh}]},{type:a,tag:c,props:{},children:[{type:b,value:bi}]},{type:a,tag:l,props:{src:bj,style:F},children:[]},{type:a,tag:r,props:{id:A},children:[{type:b,value:A}]},{type:a,tag:f,props:{id:B},children:[{type:b,value:B}]},{type:a,tag:c,props:{},children:[{type:b,value:bk}]},{type:a,tag:h,props:{code:Q,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:b,value:Q}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bl}]},{type:a,tag:c,props:{},children:[{type:b,value:bm}]},{type:a,tag:h,props:{code:R,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:b,value:R}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bn}]},{type:a,tag:h,props:{code:S,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:b,value:S}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bo}]},{type:a,tag:f,props:{id:T},children:[{type:b,value:q}]},{type:a,tag:c,props:{},children:[{type:b,value:bp}]},{type:a,tag:h,props:{code:U,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:b,value:U}]}]}]},{type:a,tag:f,props:{id:C},children:[{type:b,value:C}]},{type:a,tag:c,props:{},children:[{type:b,value:bq},{type:a,tag:m,props:{},children:[{type:b,value:br}]},{type:b,value:bs}]},{type:a,tag:h,props:{code:V,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:b,value:V}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bt}]},{type:a,tag:r,props:{id:W},children:[{type:b,value:X}]},{type:a,tag:c,props:{},children:[{type:a,tag:D,props:{href:bu,rel:[E]},children:[{type:b,value:bv}]}]},{type:a,tag:c,props:{},children:[{type:a,tag:D,props:{href:bw,rel:[E]},children:[{type:b,value:bx}]}]},{type:a,tag:c,props:{},children:[{type:a,tag:D,props:{href:by,rel:[E]},children:[{type:b,value:bz}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bA}]}]},date:"2020-02-27T23:55:01.000Z",tags:["iot",I,H],body:{type:Y,children:[{type:a,tag:c,props:{},children:[{type:b,value:L}]},{type:a,tag:c,props:{},children:[{type:b,value:Z}]},{type:a,tag:c,props:{},children:[{type:a,tag:l,props:{alt:_,src:$},children:[]}]},{type:a,tag:r,props:{id:s},children:[{type:b,value:s}]},{type:a,tag:f,props:{id:t},children:[{type:b,value:t}]},{type:a,tag:c,props:{},children:[{type:b,value:aa}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ab}]},{type:a,tag:d,props:{},children:[{type:b,value:ac}]},{type:a,tag:d,props:{},children:[{type:b,value:ad}]},{type:a,tag:d,props:{},children:[{type:b,value:ae}]},{type:a,tag:d,props:{},children:[{type:b,value:af}]},{type:a,tag:d,props:{},children:[{type:b,value:ag}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ah}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ai},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aj}]},{type:a,tag:d,props:{},children:[{type:b,value:ak}]},{type:a,tag:d,props:{},children:[{type:b,value:al}]},{type:a,tag:d,props:{},children:[{type:b,value:am}]},{type:a,tag:d,props:{},children:[{type:b,value:an}]}]}]},{type:a,tag:d,props:{},children:[{type:b,value:ao},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ap}]},{type:a,tag:d,props:{},children:[{type:b,value:aq}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ar}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:as}]},{type:a,tag:d,props:{},children:[{type:b,value:at}]},{type:a,tag:d,props:{},children:[{type:b,value:au}]}]},{type:a,tag:c,props:{},children:[{type:b,value:av}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aw}]},{type:a,tag:d,props:{},children:[{type:b,value:ax}]}]},{type:a,tag:f,props:{id:u},children:[{type:b,value:u}]},{type:a,tag:c,props:{},children:[{type:b,value:ay}]},{type:a,tag:c,props:{},children:[{type:b,value:az}]},{type:a,tag:l,props:{src:aA,style:F},children:[]},{type:a,tag:f,props:{id:q},children:[{type:b,value:q}]},{type:a,tag:c,props:{},children:[{type:b,value:aB}]},{type:a,tag:l,props:{src:aC,style:aD},children:[]},{type:a,tag:c,props:{},children:[{type:b,value:aE},{type:a,tag:m,props:{},children:[{type:b,value:G}]},{type:b,value:aF},{type:a,tag:m,props:{},children:[{type:b,value:aG}]},{type:b,value:aH},{type:a,tag:m,props:{},children:[{type:b,value:G}]},{type:b,value:aI},{type:a,tag:m,props:{},children:[{type:b,value:aJ}]},{type:b,value:aK},{type:a,tag:m,props:{},children:[{type:b,value:aL}]},{type:b,value:aM}]},{type:a,tag:f,props:{id:v},children:[{type:b,value:v}]},{type:a,tag:c,props:{},children:[{type:b,value:aN}]},{type:a,tag:c,props:{},children:[{type:b,value:aO}]},{type:a,tag:c,props:{},children:[{type:b,value:aP}]},{type:a,tag:l,props:{src:aQ,style:aR},children:[]},{type:a,tag:c,props:{},children:[{type:b,value:aS}]},{type:a,tag:r,props:{id:w},children:[{type:b,value:w}]},{type:a,tag:c,props:{},children:[{type:b,value:aT}]},{type:a,tag:f,props:{id:x},children:[{type:b,value:x}]},{type:a,tag:c,props:{},children:[{type:b,value:aU}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aV}]},{type:a,tag:d,props:{},children:[{type:b,value:aW}]},{type:a,tag:d,props:{},children:[{type:b,value:aX}]},{type:a,tag:d,props:{},children:[{type:b,value:aY}]},{type:a,tag:d,props:{},children:[{type:b,value:aZ}]}]},{type:a,tag:f,props:{id:H},children:[{type:b,value:M}]},{type:a,tag:c,props:{},children:[{type:b,value:a_}]},{type:a,tag:c,props:{},children:[{type:b,value:a$}]},{type:a,tag:f,props:{id:y},children:[{type:b,value:y}]},{type:a,tag:c,props:{},children:[{type:b,value:ba}]},{type:a,tag:c,props:{},children:[{type:b,value:bb}]},{type:a,tag:f,props:{id:N},children:[{type:b,value:O}]},{type:a,tag:c,props:{},children:[{type:b,value:bc}]},{type:a,tag:c,props:{},children:[{type:b,value:bd}]},{type:a,tag:f,props:{id:z},children:[{type:b,value:z}]},{type:a,tag:c,props:{},children:[{type:b,value:be}]},{type:a,tag:l,props:{src:bf,style:bg},children:[]},{type:a,tag:f,props:{id:I},children:[{type:b,value:P}]},{type:a,tag:c,props:{},children:[{type:b,value:bh}]},{type:a,tag:c,props:{},children:[{type:b,value:bi}]},{type:a,tag:l,props:{src:bj,style:F},children:[]},{type:a,tag:r,props:{id:A},children:[{type:b,value:A}]},{type:a,tag:f,props:{id:B},children:[{type:b,value:B}]},{type:a,tag:c,props:{},children:[{type:b,value:bk}]},{type:a,tag:h,props:{code:Q,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"$ pip install -r requirements.txt"}]}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bl}]},{type:a,tag:c,props:{},children:[{type:b,value:bm}]},{type:a,tag:h,props:{code:R,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"$ cmake -D CMAKE_BUILD_TYPE=RELEASE \\"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"    -D CMAKE_INSTALL_PREFIX=\u002Fusr\u002Flocal \\"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"    -D OPENCV_EXTRA_MODULES_PATH="}]},{type:a,tag:e,props:{class:bB},children:[{type:b,value:"~"}]},{type:a,tag:e,props:{class:g},children:[{type:b,value:"\u002Fopencv_contrib\u002Fmodules \\"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"    -D ENABLE_NEON=ON \\"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"    -D ENABLE_VFPV3=ON \\"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"    -D BUILD_TESTS=OFF \\"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"    -D OPENCV_ENABLE_NONFREE=ON \\"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"    -D INSTALL_PYTHON_EXAMPLES=OFF \\"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"    -D BUILD_EXAMPLES=OFF .."}]}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bn}]},{type:a,tag:h,props:{code:S,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:"ct-cd7641"},children:[{type:b,value:"# 4个核心，Raspberry Pi 4B 大约需要 1 小时"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"make -j4"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"make install"}]}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bo}]},{type:a,tag:f,props:{id:T},children:[{type:b,value:q}]},{type:a,tag:c,props:{},children:[{type:b,value:bp}]},{type:a,tag:h,props:{code:U,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"$ python manage.py db init"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"$ python manage.py db migrate"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"$ python manage.py db upgrade"}]}]}]}]}]},{type:a,tag:f,props:{id:C},children:[{type:b,value:C}]},{type:a,tag:c,props:{},children:[{type:b,value:bq},{type:a,tag:m,props:{},children:[{type:b,value:br}]},{type:b,value:bs}]},{type:a,tag:h,props:{code:V,language:o},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{__ignoreMap:n},children:[{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"$ which python"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"\u002Fhome\u002Fxxx\u002Fumr-dive\u002Fvenv\u002Fbin\u002Fpython"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"$ "}]},{type:a,tag:e,props:{class:bB},children:[{type:b,value:"export"}]},{type:a,tag:e,props:{class:g},children:[{type:b,value:" Env=Dev"}]}]},{type:a,tag:e,props:{class:i},children:[{type:a,tag:e,props:{class:g},children:[{type:b,value:"$ sudo -E \u002Fhome\u002Fxxx\u002Fumr-dive\u002Fvenv\u002Fbin\u002Fpython gate.py -i 0.0.0.0 -o 80"}]}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bt}]},{type:a,tag:r,props:{id:W},children:[{type:b,value:X}]},{type:a,tag:c,props:{},children:[{type:a,tag:D,props:{href:bu,rel:[E]},children:[{type:b,value:bv}]}]},{type:a,tag:c,props:{},children:[{type:a,tag:D,props:{href:bw,rel:[E]},children:[{type:b,value:bx}]}]},{type:a,tag:c,props:{},children:[{type:a,tag:D,props:{href:by,rel:[E]},children:[{type:b,value:bz}]}]},{type:a,tag:c,props:{},children:[{type:b,value:bA}]},{type:a,tag:"style",children:[{type:b,value:".ct-cd7641{color:#6E7781}.ct-c4fca7{color:#CF222E}.ct-bb98a6{color:#24292F}.dark .ct-bb98a6{color:#C9D1D9}.dark .ct-c4fca7{color:#FF7B72}.dark .ct-cd7641{color:#8B949E}"}]}],toc:{title:n,searchDepth:bC,depth:bC,links:[{id:s,depth:J,text:s,children:[{id:t,depth:k,text:t},{id:u,depth:k,text:u},{id:q,depth:k,text:q},{id:v,depth:k,text:v}]},{id:w,depth:J,text:w,children:[{id:x,depth:k,text:x},{id:H,depth:k,text:M},{id:y,depth:k,text:y},{id:N,depth:k,text:O},{id:z,depth:k,text:z},{id:I,depth:k,text:P}]},{id:A,depth:J,text:A,children:[{id:B,depth:k,text:B},{id:T,depth:k,text:q},{id:C,depth:k,text:C}]},{id:W,depth:J,text:X}]}},_type:"markdown",_id:"content:blog:artificial-baka-one.md",_source:"content",_file:"blog\u002Fartificial-baka-one.md",_extension:"md"},"surround-artificial-baka-one":[{_path:"\u002Fblog\u002Fpxe-centos",title:"批量安装 CentOS 7"},null]},prerenderedAt:1679644678930}}("element","text","p","li","span","h3","ct-bb98a6","code","line","ul",3,"img","code-inline","","bash","pre","数据库","h2","网关部分","食材","应用架构","运动检测","节点部分","施工标准","温度传感器","温度采集","测试","运行环境","开动吧","a","nofollow","height: 300px","config","mcu","pcb",2,false,"能养成的智能家居系统？好诶！不是虚拟美少女？！！但是但是，大厂生态哪有亲手养大的安心？","MCU","zigbee","ZigBee","PCB","$ pip install -r requirements.txt\n","$ cmake -D CMAKE_BUILD_TYPE=RELEASE \\\n    -D CMAKE_INSTALL_PREFIX=\u002Fusr\u002Flocal \\\n    -D OPENCV_EXTRA_MODULES_PATH=~\u002Fopencv_contrib\u002Fmodules \\\n    -D ENABLE_NEON=ON \\\n    -D ENABLE_VFPV3=ON \\\n    -D BUILD_TESTS=OFF \\\n    -D OPENCV_ENABLE_NONFREE=ON \\\n    -D INSTALL_PYTHON_EXAMPLES=OFF \\\n    -D BUILD_EXAMPLES=OFF ..\n","# 4个核心，Raspberry Pi 4B 大约需要 1 小时\nmake -j4\nmake install\n","数据库-1","$ python manage.py db init\n$ python manage.py db migrate\n$ python manage.py db upgrade\n","$ which python\n\u002Fhome\u002Fxxx\u002Fumr-dive\u002Fvenv\u002Fbin\u002Fpython\n$ export Env=Dev\n$ sudo -E \u002Fhome\u002Fxxx\u002Fumr-dive\u002Fvenv\u002Fbin\u002Fpython gate.py -i 0.0.0.0 -o 80\n","reference","Reference","root","（可惜是个智障.webp","我又不是智障","\u002Fblog\u002Fartificial-baka-one\u002Fi-am-not-baka.jpg","项目大体分为两个阶段。第一阶段，改造现有设备然后接入树莓派 4B，通过 Web 应用实现远程控制，调研中转到 Google Home 的方法（到此为止了）。第二阶段，加持先进的 ML (Magic Learning) 技术，实现 AI (Artificial Idiot) 中枢，彻底替换 Google Home。主要技术指标如下。","远程控制继电器","跨平台用户界面","断网也能使用","接入 Google Home","开源（但不一定安全）","美少女皮 + 自定义唤醒词","先不管有生之年的技术指标，第一阶段用到的软件如下。","后端","Raspbian Buster (arm64)","Flask","OpenCV 4.2","MariaDB 10.4","Nginx","前端","Jinja2","Bootstrap 4","推荐的开发工具。","宇宙第一 VS Code","宇宙第二 PyCharm","不入流 Keil C51","为避免消化不良，还需掌握如下技巧。","对硬件一知半解","擅长使用 Google","网关硬件就用树莓派，主要提供 REST API，配合 Web 界面进行交互，实现远程控制设备。也可接入第三方服务，比如 Google home（嘤语学习好助手）。","为了快速上线，后端咱就用了 Python。框架采用 Flask，是一个采用模块化设计理念的 Web 应用框架，也被称为微框架。Flask 没太多默认配置，可以通过 Flask-extension 引入如 MySQL ORM，模板引擎，表单和身份验证等插件。程序使用 MVC 分层架构，便于协作开发和后续扩展，同样为了加速，暂时使用 Jinja2 模板生成器糊出来的前端。","\u002Fblog\u002Fartificial-baka-one\u002Fserver_all.jpg","MariaDB 是 MySQL 在 MySQL 的基础上改进的关系型数据库，在提升性能的同时保持与 MySQL 的完全兼容，仅需简单卸载 MySQL 并安装 MariaDB 即可。","\u002Fblog\u002Fartificial-baka-one\u002Fumr_database.png","height: 250px","参见 E-R 图，"," 表保存传感器节点的状态，包括传感器类型，环境数据最大值和最小值，传感器或执行器状态，上次动作源等。","sensor"," 表保存传感器历史数据，外键连接 "," 表。","camera"," 表保存连续运动的发生时间和截图路径。","user"," 表储存用户信息，包括登录名称，用户邮箱，密码等数据。","OpenCV 已经实现了多种常见的检测算法。MOG 算法是一个背景分割算法，以混合高斯模型为基础。此算法使用多个高斯分布混合计算对背景像素建模，指定权重为像素点 RGB 值在整个序列中的持续时间。若一个 RGB 值属于背景像素点，那么它的持续时间相对于运动像素长，相应的权重也更高。","MOG2 是 MOG 算法的改进。它为每一个像素点单独计算高斯分布，这样能更好的适应由于亮度，噪点等外部参数发生变化而引起的场景变化。","GMG 算法结合了贝叶斯分割法和静态背景估算法，使用图像序列的一些帧建立背景模型，然后通过贝叶斯估计 (Bayesian Estimation) 识别前景。这是一种自适应算法，更新出现的图像帧具有更高的权重，从而适应光照变化。此外，还可以利用开闭运算等形态学算法，除去噪音。","\u002Fblog\u002Fartificial-baka-one\u002Fopencv-motion-detect-export.png","height: 600px","运动检测流程如上图所示。","目前初号机只提供温度检测，运动检测，远程监控，自动控制，远程控制等功能。不过第一版只是试验品，咱就先来介绍下当前的硬件施工进度，以及软硬件联合测试的方法。","标准实现至少需要准备如下硬件，更敷衍的实现只需一个带摄像头的电脑。大部分模块网上有成品，没有的也能用面包板凑合下。","Raspberry Pi 4B ×1","PI Camera ×1","8051 MCU ×1","1-Wire temp sensor DS18B20 ×1","ZigBee CC2530 SoC ×3","节点 MCU 有 8051\u002FAVR ATmega8\u002FSTM32 可选，8051 本来是不会选的，不过手边有几片 8051，就直接回收利用了，用于运行控制程序，处理和保存数据。","其他还有 ZigBee，传感器模块。ZigBee 负责与其他节点或网关通信，传感器负责感知环境参数。","DS18B20 温度传感器使用 1-Wire 总线协议通信，每个传感器都有唯一的 64 位地址，MCU 通过该地址识别和寻址总线上的设备。","DS18B20 温度传感器定义了读写指令，响应指令和复位指令。除响应指令外，同步信号均由 MCU 产生。为了确保可靠的数据传输，同一时间只能有一个信号存在于 1-Wire 总线上。数据的传输符合单总线协议，按照初始化配置、ROM 指令、工作指令的顺序进行操作，其所有的指令和数据都是从低位开始发送到高位。","传感器节点的 ZigBee 模块使用网状路由，即单播发送。数据包通过 Mesh 路由发送，发送方知道接收方是否收到完整数据。网状路由最多可以经过 30 个节点来传输数据。","咱这里用的是成品模块（DL-LN3X），支持串口通信，只需指定节点的地址和数据，即可发送到目的节点，中间的过程由 CC2530 自带的程序处理。","控制温度节点的程序运行在 8051 MCU 上，使用 C 语音开发。如下图，功能是每隔 1s 上传一次温度信息，或者在上位机请求时立即上传温度信息。","\u002Fblog\u002Fartificial-baka-one\u002Fwsn-temperature-export.png","height: 400px","PCB 板形尺寸确定在 50mm*50mm 以内，完成总体布局后，开始放置组件。组件位置是否合理，将直接关系到电路是否可靠。","在 PCB 布局中，先按照功能模块划分区域，然后考虑各模块的相对位置。任何高频模拟信号或高精度数字信号都应该尽可能保持距离，原则上所有敏感区域利用 GND 相互隔离，信号路径尽可能短。","\u002Fblog\u002Fartificial-baka-one\u002Fnode-pcb.png","树莓派安装 Raspbian Buster 系统，使用 virtualenv 创建一个 Python 3 虚拟环境，执行 pip 命令安装所有依赖包。","运动捕捉相关功能使用 OpenCV 实现，PyPi 预编译的 OpenCV 4 可能缺少部分功能（目前够用了），如果需要完整功能，下面是编译安装的方法。","下载 opencv 和扩展库 opencv_contrib 源码到本地，进入 Python 3 虚拟环境，安装 numpy 和编译工具，使用 CMake 来构建编译配置。","确认配置无误，开始编译。","编译的 OpenCV 默认安装在全局的 site-packages 目录。","安装 MariaDB，使用 flask-migrate 创建数据库。","根目录下的 ","gate.py"," 是网关程序的入口文件。在生产环境部署时，还需使用 Nginx 反向代理，以提高系统的稳定性和安全性。","现在咱有了个能用的智能家居，别的再慢慢扩展，但愿不会成为有生之年系列吧。","https:\u002F\u002Fgithub.com\u002Faimkiray\u002Fudive-gateway","项目源码","https:\u002F\u002Fwww.pyimagesearch.com\u002F2019\u002F09\u002F02\u002Fopencv-stream-video-to-web-browser-html-page\u002F","OpenCV – Stream video to web browser\u002FHTML page","https:\u002F\u002Fwww.pyimagesearch.com\u002F2019\u002F09\u002F16\u002Finstall-opencv-4-on-raspberry-pi-4-and-raspbian-buster\u002F","Install OpenCV 4 on Raspberry Pi 4 and Raspbian Buster","未完待续。","ct-c4fca7",5))