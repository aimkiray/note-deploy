export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn){return {data:{"blog-use-hpc-like-pc":{_path:"\u002Fblog\u002Fuse-hpc-like-pc",_dir:"blog",_draft:J,_partial:J,_locale:"en",_empty:J,title:"超算也能用来建站吗？",description:K,excerpt:{type:al,children:[{type:a,tag:r,props:{id:v},children:[{type:b,value:v}]},{type:a,tag:f,props:{},children:[{type:b,value:am}]},{type:a,tag:f,props:{},children:[{type:b,value:an}]},{type:a,tag:f,props:{},children:[{type:b,value:K}]},{type:a,tag:r,props:{id:w},children:[{type:b,value:w}]},{type:a,tag:n,props:{id:E},children:[{type:b,value:L}]},{type:a,tag:f,props:{},children:[{type:b,value:ao}]},{type:a,tag:x,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:m,props:{},children:[{type:b,value:ap}]},{type:b,value:aq}]},{type:a,tag:p,props:{},children:[{type:a,tag:m,props:{},children:[{type:b,value:ar}]},{type:b,value:as}]},{type:a,tag:p,props:{},children:[{type:a,tag:m,props:{},children:[{type:b,value:at}]},{type:b,value:au}]}]},{type:a,tag:n,props:{id:M},children:[{type:b,value:N}]},{type:a,tag:f,props:{},children:[{type:b,value:av}]},{type:a,tag:f,props:{},children:[{type:b,value:aw}]},{type:a,tag:f,props:{},children:[{type:b,value:ax}]},{type:a,tag:g,props:{code:O,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:O}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:ay}]},{type:a,tag:g,props:{code:P,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:P}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:az}]},{type:a,tag:n,props:{id:Q},children:[{type:b,value:R}]},{type:a,tag:f,props:{},children:[{type:b,value:aA}]},{type:a,tag:f,props:{},children:[{type:b,value:aB}]},{type:a,tag:f,props:{},children:[{type:b,value:aC},{type:a,tag:m,props:{},children:[{type:b,value:aD}]},{type:b,value:aE}]},{type:a,tag:g,props:{code:S,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:S}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:aF}]},{type:a,tag:f,props:{},children:[{type:b,value:aG}]},{type:a,tag:f,props:{},children:[{type:b,value:aH}]},{type:a,tag:g,props:{code:T,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:T}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:aI}]},{type:a,tag:g,props:{code:U,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:U}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:aJ}]},{type:a,tag:g,props:{code:V,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:V}]}]}]},{type:a,tag:r,props:{id:y},children:[{type:b,value:y}]},{type:a,tag:f,props:{},children:[{type:b,value:aK}]},{type:a,tag:n,props:{id:W},children:[{type:b,value:X}]},{type:a,tag:f,props:{},children:[{type:b,value:aL}]},{type:a,tag:f,props:{},children:[{type:b,value:aM},{type:a,tag:m,props:{},children:[{type:b,value:aN}]},{type:b,value:aO}]},{type:a,tag:g,props:{code:Y,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:Y}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:aP}]},{type:a,tag:f,props:{},children:[{type:b,value:aQ},{type:a,tag:m,props:{},children:[{type:b,value:aR}]},{type:b,value:aS},{type:a,tag:aT,props:{},children:[{type:b,value:aU}]},{type:a,tag:aV,props:{href:aW,rel:[aX]},children:[{type:b,value:aY}]},{type:b,value:aZ}]},{type:a,tag:n,props:{id:Z},children:[{type:b,value:_}]},{type:a,tag:f,props:{},children:[{type:b,value:a_}]},{type:a,tag:x,props:{},children:[{type:a,tag:p,props:{},children:[{type:b,value:a$}]}]},{type:a,tag:g,props:{code:$,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:$}]}]}]},{type:a,tag:x,props:{},children:[{type:a,tag:p,props:{},children:[{type:b,value:ba}]}]},{type:a,tag:g,props:{code:aa,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:aa}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:bb}]},{type:a,tag:n,props:{id:z},children:[{type:b,value:z}]},{type:a,tag:f,props:{},children:[{type:b,value:bc}]},{type:a,tag:g,props:{code:ab,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:b,value:ab}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:bd},{type:a,tag:m,props:{},children:[{type:b,value:ac}]},{type:b,value:be}]},{type:a,tag:r,props:{id:A},children:[{type:b,value:A}]},{type:a,tag:f,props:{},children:[{type:b,value:bf}]}]},date:"2020-11-26T12:15:40.000Z",tags:["hpc",E,"linux","container"],body:{type:al,children:[{type:a,tag:r,props:{id:v},children:[{type:b,value:v}]},{type:a,tag:f,props:{},children:[{type:b,value:am}]},{type:a,tag:f,props:{},children:[{type:b,value:an}]},{type:a,tag:f,props:{},children:[{type:b,value:K}]},{type:a,tag:r,props:{id:w},children:[{type:b,value:w}]},{type:a,tag:n,props:{id:E},children:[{type:b,value:L}]},{type:a,tag:f,props:{},children:[{type:b,value:ao}]},{type:a,tag:x,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:m,props:{},children:[{type:b,value:ap}]},{type:b,value:aq}]},{type:a,tag:p,props:{},children:[{type:a,tag:m,props:{},children:[{type:b,value:ar}]},{type:b,value:as}]},{type:a,tag:p,props:{},children:[{type:a,tag:m,props:{},children:[{type:b,value:at}]},{type:b,value:au}]}]},{type:a,tag:n,props:{id:M},children:[{type:b,value:N}]},{type:a,tag:f,props:{},children:[{type:b,value:av}]},{type:a,tag:f,props:{},children:[{type:b,value:aw}]},{type:a,tag:f,props:{},children:[{type:b,value:ax}]},{type:a,tag:g,props:{code:O,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"module avail "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" module.log "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ae}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"cat module.log "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" grep gcc"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"gcc\u002F4.4.7-kd"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"gcc\u002F4.9.2-fenggl"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"gcc\u002F7.3.0-wzm"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"gcc\u002F8.1.0-wjl"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"gcc\u002F8.3.0-wzm"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"gcc\u002F9.1.0-fenggl"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"..."}]}]}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:ay}]},{type:a,tag:g,props:{code:P,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"module load gcc\u002F8.1.0-wjl"}]}]}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:az}]},{type:a,tag:n,props:{id:Q},children:[{type:b,value:R}]},{type:a,tag:f,props:{},children:[{type:b,value:aA}]},{type:a,tag:f,props:{},children:[{type:b,value:aB}]},{type:a,tag:f,props:{},children:[{type:b,value:aC},{type:a,tag:m,props:{},children:[{type:b,value:aD}]},{type:b,value:aE}]},{type:a,tag:g,props:{code:S,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"Bootstrap: docker"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"From: ubuntu:18.04"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"%help"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    App: screenfetch"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    Usage: singulaity "}]},{type:a,tag:c,props:{class:o},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"image name"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:F}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"%files"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    \u002Fetc\u002Fapt\u002Fsources.list"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    \u002Fetc\u002Fssl\u002Fcerts \u002Fetc\u002Fssl\u002Fcerts"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"%post"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    apt-get update "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"&&"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" apt-get install -y screenfetch"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    rm -rf \u002Fvar\u002Flib\u002Fapt\u002Flists\u002F"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"*"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"%environment"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"export"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" LC_ALL=C"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"%runscript"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:o},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" screenfetch"}]}]}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:aF}]},{type:a,tag:f,props:{},children:[{type:b,value:aG}]},{type:a,tag:f,props:{},children:[{type:b,value:aH}]},{type:a,tag:g,props:{code:T,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"singularity build run.sif screenfetch.def"}]}]}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:aI}]},{type:a,tag:g,props:{code:U,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"singularity run run.sif"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:o},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" run.sif screenfetch"}]}]}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:aJ}]},{type:a,tag:g,props:{code:V,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:o},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" docker:\u002F\u002Fubuntu:latest lsb_release -a"}]}]}]}]}]},{type:a,tag:r,props:{id:y},children:[{type:b,value:y}]},{type:a,tag:f,props:{},children:[{type:b,value:aK}]},{type:a,tag:n,props:{id:W},children:[{type:b,value:X}]},{type:a,tag:f,props:{},children:[{type:b,value:aL}]},{type:a,tag:f,props:{},children:[{type:b,value:aM},{type:a,tag:m,props:{},children:[{type:b,value:aN}]},{type:b,value:aO}]},{type:a,tag:g,props:{code:Y,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ag}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ah}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ai}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:aj}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"#SBATCH --nodes=3"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"#SBATCH --ntasks=3"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:bg}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"#SBATCH --no-kill=on"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ak}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:o},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:F}]}]}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:aP}]},{type:a,tag:f,props:{},children:[{type:b,value:aQ},{type:a,tag:m,props:{},children:[{type:b,value:aR}]},{type:b,value:aS},{type:a,tag:aT,props:{},children:[{type:b,value:aU}]},{type:a,tag:aV,props:{href:aW,rel:[aX]},children:[{type:b,value:aY}]},{type:b,value:aZ}]},{type:a,tag:n,props:{id:Z},children:[{type:b,value:_}]},{type:a,tag:f,props:{},children:[{type:b,value:a_}]},{type:a,tag:x,props:{},children:[{type:a,tag:p,props:{},children:[{type:b,value:a$}]}]},{type:a,tag:g,props:{code:$,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ag}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ah}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ai}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:aj}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:bh}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ak}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"ip="}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:"$(ip addr "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:" grep 'state UP' -A2 "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:" tail -n1 "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:" awk '{print $2}' "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:" cut -f1 -d '\u002F')"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:G}]},{type:a,tag:c,props:{class:o},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" -i $ip -p $1"}]}]}]}]}]},{type:a,tag:x,props:{},children:[{type:a,tag:p,props:{},children:[{type:b,value:ba}]}]},{type:a,tag:g,props:{code:aa,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"#!\u002Fbin\u002Fbash"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:o},children:[{type:b,value:"set"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" -o pipefail"}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"for"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" i "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:"in"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" {23300..23333}"}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:";"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"do"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    sbatch job-worker.sh $i"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:af}]},{type:a,tag:c,props:{class:o},children:[{type:b,value:"echo"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:"\"Task "}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"$i"}]},{type:a,tag:c,props:{class:u},children:[{type:b,value:" works.\""}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:h},children:[{type:b,value:"done"}]}]}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:bb}]},{type:a,tag:n,props:{id:z},children:[{type:b,value:z}]},{type:a,tag:f,props:{},children:[{type:b,value:bc}]},{type:a,tag:g,props:{code:ab,language:k},children:[{type:a,tag:l,props:{},children:[{type:a,tag:g,props:{__ignoreMap:i},children:[{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ag}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ah}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:ai}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:aj}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:"#SBATCH --nodes=1"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:bh}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:j},children:[{type:b,value:bg}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ak}]}]},{type:a,tag:c,props:{class:d},children:[]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:bi}]},{type:a,tag:c,props:{class:o},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:bj}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bk}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bk}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" module1.log "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bl}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"sleep 30s"}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:bi}]},{type:a,tag:c,props:{class:o},children:[{type:b,value:s}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:bj}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bm}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bm}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" module2.log "}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:h},children:[{type:b,value:bl}]}]},{type:a,tag:c,props:{class:d},children:[{type:a,tag:c,props:{class:o},children:[{type:b,value:ac}]}]}]}]}]},{type:a,tag:f,props:{},children:[{type:b,value:bd},{type:a,tag:m,props:{},children:[{type:b,value:ac}]},{type:b,value:be}]},{type:a,tag:r,props:{id:A},children:[{type:b,value:A}]},{type:a,tag:f,props:{},children:[{type:b,value:bf}]},{type:a,tag:"style",children:[{type:b,value:".ct-e7dd79{color:#0A3069}.ct-a08478{color:#6E7781}.ct-e09eed{color:#0550AE}.ct-6e7bd7{color:#CF222E}.ct-2130d2{color:#24292F}.dark .ct-2130d2{color:#C9D1D9}.dark .ct-6e7bd7{color:#FF7B72}.dark .ct-e09eed{color:#79C0FF}.dark .ct-a08478{color:#8B949E}.dark .ct-e7dd79{color:#A5D6FF}"}]}],toc:{title:i,searchDepth:bn,depth:bn,links:[{id:v,depth:I,text:v},{id:w,depth:I,text:w,children:[{id:E,depth:B,text:L},{id:M,depth:B,text:N},{id:Q,depth:B,text:R}]},{id:y,depth:I,text:y,children:[{id:W,depth:B,text:X},{id:Z,depth:B,text:_},{id:z,depth:B,text:z}]},{id:A,depth:I,text:A}]}},_type:"markdown",_id:"content:blog:use-hpc-like-pc.md",_source:"content",_file:"blog\u002Fuse-hpc-like-pc.md",_extension:"md"},"surround-use-hpc-like-pc":[{_path:"\u002Fblog\u002Fmake-nvidia-explosion",title:"NVIDIA 核试验（Linux）"},{_path:"\u002Fblog\u002Fpxe-ubuntu",title:"批量重装 Ubuntu 18.04"}]},prerenderedAt:1679644678641}}("element","text","span","line","ct-2130d2","p","code","ct-6e7bd7","","ct-a08478","bash","pre","code-inline","h3","ct-e09eed","li"," ","h2","exec","\u003C","ct-e7dd79","概述","食材","ul","料理","单节点部署","结论",3,"|","command","slurm","\u003E","singularity "," bin.sif ",2,false,"超算上跑的程序一般都会针对任务调度系统定制优化，比如将大规模优化问题通过数学方法分解成数个子问题，或者 FFT 之类的适合分解的算法，配合调度工具并行计算出结果再迭代解出原问题。","Slurm","modules","Modules","module avail \u003E\u003E module.log 2\u003E&1\ncat module.log | grep gcc\n\ngcc\u002F4.4.7-kd\ngcc\u002F4.9.2-fenggl\ngcc\u002F7.3.0-wzm\ngcc\u002F8.1.0-wjl\ngcc\u002F8.3.0-wzm\ngcc\u002F9.1.0-fenggl\n...\n","module load gcc\u002F8.1.0-wjl\n","singularity","Singularity","Bootstrap: docker\nFrom: ubuntu:18.04\n\n%help\n    App: screenfetch\n    Usage: singulaity exec \u003Cimage name\u003E \u003Ccommand\u003E\n\n%files\n    \u002Fetc\u002Fapt\u002Fsources.list\n    \u002Fetc\u002Fssl\u002Fcerts \u002Fetc\u002Fssl\u002Fcerts\n\n%post\n    apt-get update && apt-get install -y screenfetch\n    rm -rf \u002Fvar\u002Flib\u002Fapt\u002Flists\u002F*\n\n%environment\n    export LC_ALL=C\n\n%runscript\n    exec screenfetch\n","singularity build run.sif screenfetch.def\n","singularity run run.sif\nsingularity exec run.sif screenfetch\n","singularity exec docker:\u002F\u002Fubuntu:latest lsb_release -a\n","多节点部署相同参数","多节点部署（相同参数）","#!\u002Fbin\u002Fsh\n#SBATCH --job-name worker\n#SBATCH --error=job-%j.err\n#SBATCH --partition=amd\n#SBATCH --nodes=3\n#SBATCH --ntasks=3\n#SBATCH --cpus-per-task=64\n#SBATCH --no-kill=on\n\nmodule load singularity\u002F3.6\n\nsingularity exec bin.sif \u003Ccommand\u003E\n","多节点部署不同参数","多节点部署（不同参数）","#!\u002Fbin\u002Fsh\n#SBATCH --job-name worker\n#SBATCH --error=job-%j.err\n#SBATCH --partition=amd\n#SBATCH --ntasks=1\n\nmodule load singularity\u002F3.6\n\nip=$(ip addr | grep 'state UP' -A2 | tail -n1 | awk '{print $2}' | cut -f1 -d '\u002F')\n\nsingularity exec bin.sif \u003Ccommand\u003E -i $ip -p $1\n","#!\u002Fbin\u002Fbash\n\nset -o pipefail\n\nfor i in {23300..23333};\ndo\n    sbatch job-worker.sh $i\n    echo \"Task $i works.\"\ndone\n","#!\u002Fbin\u002Fsh\n#SBATCH --job-name worker\n#SBATCH --error=job-%j.err\n#SBATCH --partition=amd\n#SBATCH --nodes=1\n#SBATCH --ntasks=1\n#SBATCH --cpus-per-task=64\n\nmodule load singularity\u002F3.6\n\nnohup singularity exec bin.sif \u003Cbin1\u003E \u003Ccommand1\u003E \u003E\u003E module1.log 2\u003E&1 &\nsleep 30s\nnohup singularity exec bin.sif \u003Cbin2\u003E \u003Ccommand2\u003E \u003E\u003E module2.log 2\u003E&1 &\nwait\n","wait","\u003E\u003E","2\u003E&1","    ","#!\u002Fbin\u002Fsh","#SBATCH --job-name worker","#SBATCH --error=job-%j.err","#SBATCH --partition=amd","module load singularity\u002F3.6","root","传统超算由多个计算节点组成，每个节点有自己的操作系统，可独立或与其他节点协同工作。设计难点在于传输带宽和延迟，共享内存，并行存储，散热，软件优化等方面。","文中使用的超算，其计算节点看起来是个 Linux 服务器，可以 SSH 登录，节点间使用 InfiniBand 协议通信，共享 home 目录。超算常用于并行计算，实际使用中一般不会亲自 SSH 上去部署服务，而是通过任务调度工具，比如 Slurm (Simple Linux Utility for Resource Management)，开源的超算资源管理软件，在 TOP500 超算中占有率超过 50%。","Slurm 调度工具常见于 Linux 超算，简单说下部署任务时常用的方法。","salloc",": 先抢占资源，后部署任务。执行 salloc 命令获取节点资源（如果是超算中心需要排队等待，排到后就开始计费），此时可以手动 ssh 登录计算节点。当用户退出节点时任务自动终止，适合软件测试。","srun",": 交互式提交任务。命令提交后会在终端实时返回程序输出内容，程序退出自动释放资源，适合交互式单节点任务。","sbatch",": 批量提交任务。将节点类型，任务数量，资源需求等参数和执行程序的命令写在 Bash 脚本中提交，在所有任务执行完成后释放资源（执行失败也会释放），适合并行或多步任务。","使用 pacman \u002F apt 安装软件时会也会自动安装依赖，而超算出于安全和稳定的考虑，禁止用户获取 root 权限，用户不能使用 apt 之类的包管理工具，取而代之的是 environment modules。","Modules 是一个 Shell 初始化工具，可在 Shell 中动态加载依赖的软件\u002F库（由管理员预装）。","查看可用的 gcc 软件版本。","复制软件全称，载入到当前环境。","之后就能用 GCC 8.1 编译程序了。但如果是 Python Web 程序，依赖太多，找管理员一个个添加也不太合适。不如换个思路，不知道大家有没有想到容器呢？","Singularity 是专为超算打造的容器，支持 InfiniBand 和 GPU 等 PCIe 设备，对性能的损耗可以忽略不计。我们可以在本地打包 Singularity 镜像，再到超算上用 environment modules 加载 Singularity 来运行镜像。","回到正题，那么先尝试部署个 screenfetch 获取节点的硬件信息。","Singularity 兼容 Docker 镜像，也有自己的镜像格式。创建 singularity 定义文件","screenfetch.def","，写入如下内容。","Bootstrap 是基础镜像源，From 是基础镜像，%help 是帮助信息，%files 是需要打包的文件。","这个栗子中，我们从 Docker 源获取 Ubuntu 18.04 基础镜像，将本机 apt 软件源配置和 ssl 证书拷贝到容器内的相同位置，然后安装 screenfetch 并清理缓存节省空间，最后设置环境变量和启动容器时执行的命令。","打包镜像到当前目录。","run.sif 就是镜像本体了。容器有多种启动方式，比如，使用 run 指令会运行 runscript 中的语句，而 exec 指令可以自定义容器运行的程序，比如。","两条命令返回相同的结果。如果你对 Dockerfile 比较熟悉，也可以打包 Docker 镜像，上传到 Docker Hub，然后使用 Singularity 运行 Docker 镜像，这样的镜像体积小很多，比如。","有了容器，就算把博客挂到超算上也没问题呦！","下面尝试部署分布式程序，包含一个主程序和多个子程序，通信协议是 RESTful API。子程序分别部署在多个节点上，相互没有直接通信，由主程序统一调度。","新建 sbatch 脚本","job-worker.sh","。","sbatch 配置中的 nodes 和 ntasks 保持一致，cpus-per-task 是单个节点的核心数，以保证每个节点运行一个程序（只设定 ntasks 也可以），no-kill 参数可以让单一节点的故障不影响其他节点。","执行","sbatch job-worker.sh","即可部署集群，","del","但似乎没办法修改任务的运行参数。","a","https:\u002F\u002Fslurm.schedmd.com\u002Fsbatch.html","nofollow","这里"," filename pattern 的说明，通配符 %A 和 %a 代指作业编号和索引编号，有兴趣可以尝试下能否用在命令参数中。","为解决上述问题，将 nodes 和 ntasks 改为 1，这样 sbatch 脚本只会部署单个节点，然后循环执行 sbatch，在每次循环中修改 sbatch 脚本参数，以此实现动态传参的效果。","sbatch 脚本","外部脚本","在这个栗子中我们部署了 33 个程序，监听的端口各不相同（23300 ~ 23333）。","如果想要多个程序放在一个节点运行，也就是单节点一次提交多个不同的程序。但 Slurm 好像没有这种方法。不过 sbatch 支持 bash 脚本，那直接用 bash 也是可以的吧。","这样就在单个节点运行了两个任务。当 sbatch 脚本执行完成后，Slurm 会认为任务结束并释放资源，使用 "," 可以让 Slurm 等待所有后台任务执行完成。","基于上述方法（主要是容器），就是超算也能为所欲为。至于💰代价嘛...","#SBATCH --cpus-per-task=64","#SBATCH --ntasks=1","nohup singularity ","bin","1\u003E","&","2\u003E",5))